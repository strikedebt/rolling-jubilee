(function(a,b){function c(a,b,c){this._d=a,this._isUTC=!!b,this._a=a._a||null,a._a=null,this._lang=c||!1}function d(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,f=a.weeks||a.w||0,g=a.days||a.d||0,h=a.hours||a.h||0,i=a.minutes||a.m||0,j=a.seconds||a.s||0,k=a.milliseconds||a.ms||0;this._milliseconds=k+1e3*j+6e4*i+36e5*h,this._days=g+7*f,this._months=d+12*c,b.milliseconds=k%1e3,j+=e(k/1e3),b.seconds=j%60,i+=e(j/60),b.minutes=i%60,h+=e(i/60),b.hours=h%24,g+=e(h/24),g+=7*f,b.days=g%30,d+=e(g/30),b.months=d%12,c+=e(d/12),b.years=c,this._lang=!1}function e(a){return 0>a?Math.ceil(a):Math.floor(a)}function f(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function g(a,b,c){var d,e=b._milliseconds,f=b._days,g=b._months;e&&a._d.setTime(+a+e*c),f&&a.date(a.date()+f*c),g&&(d=a.date(),a.date(1).month(a.month()+g*c).date(Math.min(d,a.daysInMonth())))}function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function i(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function j(b,c){var d,e;for(d=1;7>d;d++)b[d]=null==b[d]?2===d?1:0:b[d];return b[7]=c,e=new a(0),c?(e.setUTCFullYear(b[0],b[1],b[2]),e.setUTCHours(b[3],b[4],b[5],b[6])):(e.setFullYear(b[0],b[1],b[2]),e.setHours(b[3],b[4],b[5],b[6])),e._a=b,e}function k(a,b){var c,d,e=[];for(!b&&G&&(b=require("./lang/"+a)),c=0;c<H.length;c++)b[H[c]]=b[H[c]]||E.en[H[c]];for(c=0;12>c;c++)d=A([2e3,c]),e[c]=new RegExp("^"+(b.months[c]||b.months(d,""))+"|^"+(b.monthsShort[c]||b.monthsShort(d,"")).replace(".",""),"i");return b.monthsParse=b.monthsParse||e,E[a]=b,b}function l(a){var b="string"==typeof a&&a||a&&a._lang||null;return b?E[b]||k(b):A}function m(a){return _[a]?"'+("+_[a]+")+'":a.replace(L,"").replace(/\\?'/g,"\\'")}function n(a){return l().longDateFormat[a]||a}function o(a){var b="var a,b;return '"+a.replace(J,m)+"';",c=Function;return new c("t","v","o","p","m",b)}function p(a,b){function c(c,e){return d[c].call?d[c](a,b):d[c][e]}for(var d=l(a);K.test(b);)b=b.replace(K,n);return $[b]||($[b]=o(b)),$[b](a,c,d.ordinal,f,d.meridiem)}function q(a){switch(a){case"DDDD":return P;case"YYYY":return Q;case"S":case"SS":case"SSS":case"DDD":return O;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return R;case"Z":case"ZZ":return S;case"T":return T;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return N;default:return new RegExp(a.replace("\\",""))}}function r(a,b,c,d){var e;switch(a){case"M":case"MM":c[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":for(e=0;12>e;e++)if(l().monthsParse[e].test(b)){c[1]=e;break}break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(c[2]=~~b);break;case"YY":b=~~b,c[0]=b+(b>70?1900:2e3);break;case"YYYY":c[0]=~~Math.abs(b);break;case"a":case"A":d.isPm="pm"===(b+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":c[3]=~~b;break;case"m":case"mm":c[4]=~~b;break;case"s":case"ss":c[5]=~~b;break;case"S":case"SS":case"SSS":c[6]=~~(1e3*("0."+b));break;case"Z":case"ZZ":d.isUTC=!0,e=(b+"").match(X),e&&e[1]&&(d.tzh=~~e[1]),e&&e[2]&&(d.tzm=~~e[2]),e&&"+"===e[0]&&(d.tzh=-d.tzh,d.tzm=-d.tzm)}}function s(a,b){var c,d,e=[0,0,1,0,0,0,0],f={tzh:0,tzm:0},g=b.match(J);for(c=0;c<g.length;c++)d=(q(g[c]).exec(a)||[])[0],a=a.replace(q(g[c]),""),r(g[c],d,e,f);return f.isPm&&e[3]<12&&(e[3]+=12),f.isPm===!1&&12===e[3]&&(e[3]=0),e[3]+=f.tzh,e[4]+=f.tzm,j(e,f.isUTC)}function t(a,b){var d,e,f,g,h,j=a.match(M)||[],k=99;for(f=0;f<b.length;f++)g=s(a,b[f]),e=p(new c(g),b[f]).match(M)||[],h=i(j,e),k>h&&(k=h,d=g);return d}function u(b){var c,d="YYYY-MM-DDT";if(U.exec(b)){for(c=0;4>c;c++)if(W[c][1].exec(b)){d+=W[c][0];break}return S.exec(b)?s(b,d+" Z"):s(b,d)}return new a(b)}function v(a,b,c,d,e){var f=e.relativeTime[a];return"function"==typeof f?f(b||1,!!c,a,d):f.replace(/%d/i,b||1)}function w(a,b,c){var d=D(Math.abs(a)/1e3),e=D(d/60),f=D(e/60),g=D(f/24),h=D(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",D(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,v.apply({},i)}function x(a,b){A.fn[a]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function y(a){A.duration.fn[a]=function(){return this._data[a]}}function z(a,b){A.duration.fn["as"+a]=function(){return+this/b}}for(var A,B,C="1.7.0",D=Math.round,E={},F="en",G="undefined"!=typeof module&&module.exports,H="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),I=/^\/?Date\((\-?\d+)/i,J=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?)/g,K=/(LT|LL?L?L?)/g,L=/(^\[)|(\\)|\]$/g,M=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,N=/\d\d?/,O=/\d{1,3}/,P=/\d{3}/,Q=/\d{1,4}/,R=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,S=/Z|[\+\-]\d\d:?\d\d/i,T=/T/i,U=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,V="YYYY-MM-DDTHH:mm:ssZ",W=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],X=/([\+\-]|\d\d)/gi,Y="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Z={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},$={},_={M:"(a=t.month()+1)",MMM:'v("monthsShort",t.month())',MMMM:'v("months",t.month())',D:"(a=t.date())",DDD:"(a=new Date(t.year(),t.month(),t.date()),b=new Date(t.year(),0,1),a=~~(((a-b)/864e5)+1.5))",d:"(a=t.day())",dd:'v("weekdaysMin",t.day())',ddd:'v("weekdaysShort",t.day())',dddd:'v("weekdays",t.day())',w:"(a=new Date(t.year(),t.month(),t.date()-t.day()+5),b=new Date(a.getFullYear(),0,4),a=~~((a-b)/864e5/7+1.5))",YY:"p(t.year()%100,2)",YYYY:"p(t.year(),4)",a:"m(t.hours(),t.minutes(),!0)",A:"m(t.hours(),t.minutes(),!1)",H:"t.hours()",h:"t.hours()%12||12",m:"t.minutes()",s:"t.seconds()",S:"~~(t.milliseconds()/100)",SS:"p(~~(t.milliseconds()/10),2)",SSS:"p(t.milliseconds(),3)",Z:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(a/60),2)+":"+p(~~a%60,2)',ZZ:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(10*a/6),4)'},ab="DDD w M D d".split(" "),bb="M D H h m s w".split(" ");ab.length;)B=ab.pop(),_[B+"o"]=_[B]+"+o(a)";for(;bb.length;)B=bb.pop(),_[B+B]="p("+_[B]+",2)";for(_.DDDD="p("+_.DDD+",3)",A=function(d,e){if(null===d||""===d)return null;var f,g;return A.isMoment(d)?new c(new a(+d._d),d._isUTC,d._lang):(e?f=h(e)?t(d,e):s(d,e):(g=I.exec(d),f=d===b?new a:g?new a(+g[1]):d instanceof a?d:h(d)?j(d):"string"==typeof d?u(d):new a(d)),new c(f))},A.utc=function(a,b){return h(a)?new c(j(a,!0),!0):("string"==typeof a&&!S.exec(a)&&(a+=" +0000",b&&(b+=" Z")),A(a,b).utc())},A.unix=function(a){return A(1e3*a)},A.duration=function(a,b){var c,e=A.isDuration(a),f="number"==typeof a,g=e?a._data:f?{}:a;return f&&(b?g[b]=a:g.milliseconds=a),c=new d(g),e&&(c._lang=a._lang),c},A.humanizeDuration=function(a,b,c){return A.duration(a,b===!0?null:b).humanize(b===!0?!0:c)},A.version=C,A.defaultFormat=V,A.lang=function(a,b){var c;if(!a)return F;if((b||!E[a])&&k(a,b),E[a]){for(c=0;c<H.length;c++)A[H[c]]=E[a][H[c]];A.monthsParse=E[a].monthsParse,F=a}},A.langData=l,A.isMoment=function(a){return a instanceof c},A.isDuration=function(a){return a instanceof d},A.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}}),A.fn=c.prototype={clone:function(){return A(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?!i(this._a,(this._a[7]?A.utc(this):this).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){return p(this,a?a:A.defaultFormat)},add:function(a,b){var c=b?A.duration(+b,a):A.duration(a);return g(this,c,1),this},subtract:function(a,b){var c=b?A.duration(+b,a):A.duration(a);return g(this,c,-1),this},diff:function(a,b,c){var d,e=this._isUTC?A(a).utc():A(a).local(),f=6e4*(this.zone()-e.zone()),g=this._d-e._d-f,h=this.year()-e.year(),i=this.month()-e.month(),j=this.date()-e.date();return d="months"===b?12*h+i+j/30:"years"===b?h+(i+j/30)/12:"seconds"===b?g/1e3:"minutes"===b?g/6e4:"hours"===b?g/36e5:"days"===b?g/864e5:"weeks"===b?g/6048e5:g,c?d:D(d)},from:function(a,b){return A.duration(this.diff(a)).lang(this._lang).humanize(!b)},fromNow:function(a){return this.from(A(),a)},calendar:function(){var a=this.diff(A().sod(),"days",!0),b=this.lang().calendar,c=b.sameElse,d=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"==typeof d?d.apply(this):d)},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<A([this.year()]).zone()||this.zone()<A([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return A.utc([this.year(),this.month()+1,0]).date()},lang:function(a){return a===b?l(this):(this._lang=a,this)}},B=0;B<Y.length;B++)x(Y[B].toLowerCase(),Y[B]);x("year","FullYear"),A.duration.fn=d.prototype={weeks:function(){return e(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(a){var b=+this,c=this.lang().relativeTime,d=w(b,!a,this.lang());return a&&(d=(0>=b?c.past:c.future).replace(/%s/i,d)),d},lang:A.fn.lang};for(B in Z)Z.hasOwnProperty(B)&&(z(B,Z[B]),y(B.toLowerCase()));z("Weeks",6048e5),G&&(module.exports=A),"undefined"==typeof ender&&(this.moment=A),"function"==typeof define&&define.amd&&define("moment",[],function(){return A})}).call(this,Date),function(a,b){function c(a){return new d(a)}function d(a){return a&&a._wrapped?a:(this._wrapped=a,void 0)}function e(a,b,c){b||(b=0);var d=a.length,e=d-b>=(c||Ob),f=e?{}:a;if(e)for(var g,h=b-1;++h<d;)g=a[h]+"",(ec.call(f,g)?f[g]:f[g]=[]).push(a[h]);return function(a){if(e){var c=a+"";return ec.call(f,c)&&O(f[c],a)>-1}return O(f,a,b)>-1}}function f(){for(var a,b,c,d=-1,e=arguments.length,f={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};++d<e;){a=arguments[d];for(b in a)c=null==(c=a[b])?"":c,/beforeLoop|inLoop/.test(b)?("string"==typeof c&&(c={array:c,object:c}),f.arrayBranch[b]=c.array||"",f.objectBranch[b]=c.object||""):f[b]=c}var h=f.args,i=/^[^,]+/.exec(h)[0],j=f.useStrict;f.firstArg=i,f.hasDontEnumBug=Eb,f.isKeysFast=Fc,f.noArgsEnum=yc,f.shadowed=_b,f.useHas=f.useHas!==!1,f.useStrict=null==j?Gc:j,null==f.noCharByIndex&&(f.noCharByIndex=Bc),f.exit||(f.exit="if (!"+i+") return result"),"collection"==i&&f.arrayBranch.inLoop||(f.arrayBranch=null);var l=Function("arrayLikeClasses, ArrayProto, bind, compareAscending, concat, forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, isPlainObject, iteratorBind, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","var callee = function("+h+") {\n"+Oc(f)+"\n};\nreturn callee");return l(Ic,Ib,db,g,dc,bd,ec,ob,O,q,Yc,r,s,k,tc,Mc,mc,gc,hc,vc,ic)}function g(a,c){var d=a.index,e=c.index;return a=a.criteria,c=c.criteria,a===b?1:c===b?-1:c>a?-1:a>c?1:e>d?-1:1}function h(a,b){return cc[b]}function i(a){return"\\"+Nc[a]}function j(a){return Kc[a]}function k(a,b){return function(c,d,e){return a.call(b,c,d,e)}}function l(){}function m(a,b){if(a&&Qb.test(b))return"<e%-"+b+"%>";var c=cc.length;return cc[c]="' +\n__e("+b+") +\n'",bc+c}function n(a,b,c,d){if(d){var e=cc.length;return cc[e]="';\n"+d+";\n__p += '",bc+e}return b?m(null,b):o(null,c)}function o(a,b){if(a&&Qb.test(b))return"<e%="+b+"%>";var c=cc.length;return cc[c]="' +\n((__t = ("+b+")) == null ? '' : __t) +\n'",bc+c}function p(a){return Lc[a]}function q(a){return ic.call(a)==nc}function r(a){return"function"==typeof a}function s(a,b){return a?a==Kb||a.__proto__==Kb&&(b||!q(a)):!1}function t(a,b,c,d,e){if(null==a)return a;c&&(b=!1),e||(e={value:null}),null==e.value&&(e.value=!!(Jb.clone||Lb.clone||Mb.clone));var f=Mc[typeof a];if((f||e.value)&&a.clone&&r(a.clone))return e.value=null,a.clone(b);if(f){var g=ic.call(a);if(!Jc[g]||zc&&q(a))return a;var h=g==oc;f=h||(g==tc?s(a,!0):f)}if(!f||!b)return f?h?hc.call(a):ad({},a):a;var i=a.constructor;switch(g){case pc:return new i(1==a);case qc:return new i(+a);case sc:case vc:return new i(a);case uc:return i(a.source,Vb.exec(a))}d||(d=[]);for(var j=d.length;j--;)if(d[j].source==a)return d[j].value;j=a.length;var k=h?i(j):{};if(d.push({value:k,source:a}),h)for(var l=-1;++l<j;)k[l]=t(a[l],b,null,d,e);else cd(a,function(a,c){k[c]=t(a,b,null,d,e)});return k}function u(a,b){return a?ec.call(a,b):!1}function v(a){return a===!0||a===!1||ic.call(a)==pc}function w(a){return ic.call(a)==qc}function x(a){return a?1===a.nodeType:!1}function y(a,b,c,d){if(null==a||null==b)return a===b;if(d||(d={value:null}),null==d.value&&(d.value=!!(Jb.isEqual||Lb.isEqual||Mb.isEqual)),Mc[typeof a]||Mc[typeof b]||d.value){if(a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped),a.isEqual&&r(a.isEqual))return d.value=null,a.isEqual(b);if(b.isEqual&&r(b.isEqual))return d.value=null,b.isEqual(a)}if(a===b)return 0!==a||1/a==1/b;var e=ic.call(a);if(e!=ic.call(b))return!1;switch(e){case pc:case qc:return+a==+b;case sc:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case uc:case vc:return a==b+""}var f=Ic[e];if(zc&&!f&&(f=q(a))&&!q(b))return!1;if(!f&&(e!=tc||Cc&&("function"!=typeof a.toString&&"string"==typeof(a+"")||"function"!=typeof b.toString&&"string"==typeof(b+""))))return!1;c||(c=[]);for(var g=c.length;g--;)if(c[g]==a)return!0;var h=-1,i=!0,j=0;if(c.push(a),f){if(j=a.length,i=j==b.length)for(;j--&&(i=y(a[j],b[j],c,d)););return i}var k=a.constructor,l=b.constructor;if(k!=l&&!(r(k)&&k instanceof k&&r(l)&&l instanceof l))return!1;for(var m in a)if(ec.call(a,m)&&(j++,!ec.call(b,m)||!y(a[m],b[m],c,d)))return!1;for(m in b)if(ec.call(b,m)&&!j--)return!1;if(Eb)for(;++h<7;)if(m=_b[h],ec.call(a,m)&&(!ec.call(b,m)||!y(a[m],b[m],c,d)))return!1;return!0}function z(a){return lc(a)&&ic.call(a)==sc}function A(a){return a?Mc[typeof a]:!1}function B(a){return ic.call(a)==sc&&a!=+a}function C(a){return null===a}function D(a){return ic.call(a)==sc}function E(a){return ic.call(a)==uc}function F(a){return ic.call(a)==vc}function G(a){return a===b}function H(a){if(!a)return 0;var b=ic.call(a),c=a.length;return Ic[b]||zc&&q(a)||b==tc&&c>-1&&c===c>>>0&&r(a.splice)?c:fd(a).length}function I(a,b,c,d){if(!a)return c;var e=a.length,f=arguments.length<3;if(d&&(b=k(b,d)),e>-1&&e===e>>>0){var g=Bc&&ic.call(a)==vc?a.split(""):a;for(e&&f&&(c=g[--e]);e--;)c=b(c,g[e],e,a);return c}var h,i=fd(a);for(e=i.length,e&&f&&(c=a[i[--e]]);e--;)h=i[e],c=b(c,a[h],h,a);return c}function J(a){if(!a)return[];if(a.toArray&&r(a.toArray))return a.toArray();var b=a.length;return b>-1&&b===b>>>0?(Ac?ic.call(a)==vc:"string"==typeof a)?a.split(""):hc.call(a):id(a)}function K(a){var b=[];if(!a)return b;for(var c=-1,d=a.length;++c<d;)a[c]&&b.push(a[c]);return b}function L(a){var b=[];if(!a)return b;for(var c=-1,d=a.length,f=dc.apply(b,arguments),g=e(f,d);++c<d;)g(a[c])||b.push(a[c]);return b}function M(a,b,c){return a?null==b||c?a[0]:hc.call(a,0,b):void 0}function N(a,b){var c=[];if(!a)return c;for(var d,e=-1,f=a.length;++e<f;)d=a[e],Yc(d)?fc.apply(c,b?d:N(d)):c.push(d);return c}function O(a,b,c){if(!a)return-1;var d=-1,e=a.length;if(c){if("number"!=typeof c)return d=Y(a,b),a[d]===b?d:-1;d=(0>c?Math.max(0,e+c):c)-1}for(;++d<e;)if(a[d]===b)return d;return-1}function P(a,b,c){return a?hc.call(a,0,-(null==b||c?1:b)):[]}function Q(a){var b=[];if(!a)return b;var c,d=arguments.length,f=[],g=-1,h=a.length;a:for(;++g<h;)if(c=a[g],O(b,c)<0){for(var i=1;d>i;i++)if(!(f[i]||(f[i]=e(arguments[i])))(c))continue a;b.push(c)}return b}function R(a,b,c){if(a){var d=a.length;return null==b||c?a[d-1]:hc.call(a,-b||d)}}function S(a,b,c){if(!a)return-1;var d=a.length;for(c&&"number"==typeof c&&(d=(0>c?Math.max(0,d+c):Math.min(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function T(a,b,c){var d=-1/0,e=d;if(!a)return e;var f,g=-1,h=a.length;if(!b){for(;++g<h;)a[g]>e&&(e=a[g]);return e}for(c&&(b=k(b,c));++g<h;)f=b(a[g],g,a),f>d&&(d=f,e=a[g]);return e}function U(a,b,c){var d=1/0,e=d;if(!a)return e;var f,g=-1,h=a.length;if(!b){for(;++g<h;)a[g]<e&&(e=a[g]);return e}for(c&&(b=k(b,c));++g<h;)f=b(a[g],g,a),d>f&&(d=f,e=a[g]);return e}function V(a,b,c){a=+a||0,c=+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Math.max(0,Math.ceil((b-a)/c)),f=Array(e);++d<e;)f[d]=a,a+=c;return f}function W(a,b,c){return a?hc.call(a,null==b||c?1:b):[]}function X(a){if(!a)return[];for(var b,c=-1,d=a.length,e=Array(d);++c<d;)b=Math.floor(Math.random()*(c+1)),e[c]=e[b],e[b]=a[c];return e}function Y(a,b,c,d){if(!a)return 0;var e,f=0,g=a.length;if(c)for(d&&(c=db(c,d)),b=c(b);g>f;)e=f+g>>>1,c(a[e])<b?f=e+1:g=e;else for(;g>f;)e=f+g>>>1,a[e]<b?f=e+1:g=e;return f}function Z(){for(var a=-1,b=[],c=dc.apply(b,arguments),d=c.length;++a<d;)O(b,c[a])<0&&b.push(c[a]);return b}function $(a,b,c,d){var e=[];if(!a)return e;var f,g=-1,h=a.length,i=[];for("function"==typeof b&&(d=c,c=b,b=!1),c?d&&(c=k(c,d)):c=ob;++g<h;)f=c(a[g],g,a),(b?!g||i[i.length-1]!==f:O(i,f)<0)&&(i.push(f),e.push(a[g]));return e}function _(a){var b=[];if(!a)return b;for(var c=-1,d=a.length,f=e(arguments,1,20);++c<d;)f(a[c])||b.push(a[c]);return b}function ab(a){if(!a)return[];for(var b=-1,c=T(sd(arguments,"length")),d=Array(c);++b<c;)d[b]=sd(arguments,b);return d}function bb(a,b){if(!a)return{};var c=-1,d=a.length,e={};for(b||(b=[]);++c<d;)e[a[c]]=b[c];return e}function cb(a,b){return 1>a?b():function(){return--a<1?b.apply(this,arguments):void 0}}function db(a,b){function c(){var g=arguments,h=b;if(e||(a=b[d]),f.length&&(g=g.length?f.concat(hc.call(g)):f),this instanceof c){l.prototype=a.prototype,h=new l;var i=a.apply(h,g);return i&&Mc[typeof i]?i:h}return a.apply(h,g)}var d,e=r(a);if(e){if(Ec||jc&&arguments.length>2)return jc.call.apply(jc,arguments)}else d=b,b=a;var f=hc.call(arguments,2);return c}function eb(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function fb(a,b,c){function d(){h=null,c||a.apply(g,e)}var e,f,g,h;return function(){var i=c&&!h;return e=arguments,g=this,wc(h),h=xc(d,b),i&&(f=a.apply(g,e)),f}}function gb(a,c){var d=hc.call(arguments,2);return xc(function(){return a.apply(b,d)},c)}function hb(a){var c=hc.call(arguments,1);return xc(function(){return a.apply(b,c)},1)}function ib(a,b){var c={};return function(){var d=b?b.apply(this,arguments):arguments[0];return ec.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}function jb(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}function kb(a){var b=hc.call(arguments,1),c=b.length;return function(){var d,e=arguments;return e.length&&(b.length=c,fc.apply(b,e)),d=1==b.length?a.call(this,b[0]):a.apply(this,b),b.length=c,d}}function lb(a,b){function c(){h=new Date,g=null,a.apply(f,d)}var d,e,f,g,h=0;return function(){var i=new Date,j=b-(i-h);return d=arguments,f=this,0>=j?(h=i,e=a.apply(f,d)):g||(g=xc(c,j)),e}}function mb(a,b){return function(){var c=[a];return arguments.length&&fc.apply(c,arguments),b.apply(this,c)}}function nb(a){return null==a?"":(a+"").replace(Zb,j)}function ob(a){return a}function pb(a){od(dd(a),function(b){var e=c[b]=a[b];d.prototype[b]=function(){var a=[this._wrapped];arguments.length&&fc.apply(a,arguments);var b=e.apply(c,a);return this._chain&&(b=new d(b),b._chain=!0),b}})}function qb(){return a._=Pb,this}function rb(a,b){if(!a)return null;var c=a[b];return r(c)?a[b]():c}function sb(a,b,d){d||(d={}),a+="";var e,f,g=d.escape,j=d.evaluate,k=d.interpolate,l=c.templateSettings,p=d.variable||l.variable,q=p;null==g&&(g=l.escape),null==j&&(j=l.evaluate||!1),null==k&&(k=l.interpolate),g&&(a=a.replace(g,m)),k&&(a=a.replace(k,o)),j!=Ab&&(Ab=j,Db=RegExp("<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>"+(j?"|"+j.source:""),"g")),e=cc.length,a=a.replace(Db,n),e=e!=cc.length,a="__p += '"+a.replace($b,i).replace(Yb,h)+"';\n",cc.length=0,q||(p=Bb||"obj",e?a="with ("+p+") {\n"+a+"\n}\n":(p!=Bb&&(Bb=p,Cb=RegExp("(\\(\\s*)"+p+"\\."+p+"\\b","g")),a=a.replace(Wb,"$&"+p+".").replace(Cb,"$1__d"))),a=(e?a.replace(Sb,""):a).replace(Tb,"$1").replace(Ub,"$1;"),a="function("+p+") {\n"+(q?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(q?"":", __d = "+p+"."+p+" || "+p)+";\n")+a+"return __p\n}",Hc&&(a+="\n//@ sourceURL=/lodash/template/source["+ac++ +"]");try{f=Function("_","return "+a)(c)}catch(r){f=function(){throw r}}return b?f(b):(f.source=a,f)}function tb(a,b,c){var d=-1;if(c)for(;++d<a;)b.call(c,d);else for(;++d<a;)b(d)}function ub(a){return null==a?"":(a+"").replace(Rb,p)}function vb(a){var b=Nb++;return a?a+b:b}function wb(a){return a=new d(a),a._chain=!0,a}function xb(a,b){return b(a),a}function yb(){return this._chain=!0,this}function zb(){return this._wrapped}var Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(a=global),exports),Ib=Array.prototype,Jb=Boolean.prototype,Kb=Object.prototype,Lb=Number.prototype,Mb=String.prototype,Nb=0,Ob=30,Pb=a._,Qb=/[-+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,Rb=/&(?:amp|lt|gt|quot|#x27);/g,Sb=/\b__p \+= '';/g,Tb=/\b(__p \+=) '' \+/g,Ub=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vb=/\w*$/,Wb=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,Xb=RegExp("^"+(Kb.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Yb=/__token__(\d+)/g,Zb=/[&<>"']/g,$b=/['\n\r\t\u2028\u2029\\]/g,_b=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ac=0,bc="__token__",cc=[],dc=Ib.concat,ec=Kb.hasOwnProperty,fc=Ib.push,gc=Kb.propertyIsEnumerable,hc=Ib.slice,ic=Kb.toString,jc=Xb.test(jc=hc.bind)&&jc,kc=Xb.test(kc=Array.isArray)&&kc,lc=a.isFinite,mc=Xb.test(mc=Object.keys)&&mc,nc="[object Arguments]",oc="[object Array]",pc="[object Boolean]",qc="[object Date]",rc="[object Function]",sc="[object Number]",tc="[object Object]",uc="[object RegExp]",vc="[object String]",wc=a.clearTimeout,xc=a.setTimeout,yc=!0;!function(){function a(){this.x=1}var b={0:1,length:1},c=[];a.prototype={valueOf:1,y:1};for(var d in new a)c.push(d);for(d in arguments)yc=!d;Eb=(c+"").length<4,Gb="x"!=c[0],c.splice.call(b,0,1),Fb=b[0]}(1);var zc=!q(arguments),Ac="x"!=hc.call("x")[0],Bc="x"[0]+Object("x")[0]!="xx";try{var Cc=ic.call(a.document||0)==tc}catch(Dc){}var Ec=jc&&/\n|Opera/.test(jc+ic.call(a.opera)),Fc=mc&&/^.+$|true/.test(mc+!!a.attachEvent),Gc=!Ec;try{var Hc=(Function("//@")(),!a.attachEvent)}catch(Dc){}var Ic={};Ic[pc]=Ic[qc]=Ic[rc]=Ic[sc]=Ic[tc]=Ic[uc]=!1,Ic[nc]=Ic[oc]=Ic[vc]=!0;var Jc={};Jc[nc]=Jc[rc]=!1,Jc[oc]=Jc[pc]=Jc[qc]=Jc[sc]=Jc[tc]=Jc[uc]=Jc[vc]=!0;var Kc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Lc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},Mc={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1,unknown:!0},Nc={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};c.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var Oc=sb("<% if (useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length > -1 && length === length >>> 0) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectBranch.inLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {    <% if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>;\n    <% if (!hasDontEnumBug || useHas) { %>}\n<% } %>  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch || noArgsEnum) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),Pc={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (callback(value, index, collection) === false) return result"},Qc={init:"{}",top:"var prop;\nif (typeof callback != 'function') {\n  var valueProp = callback;\n  callback = function(value) { return value[valueProp] }\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)"},Rc={useHas:!1,args:"object, callback, thisArg",init:"{}",top:"var isFunc = typeof callback == 'function';\nif (!isFunc) {\n  var props = concat.apply(ArrayProto, arguments)\n} else if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (isFunc\n  ? !callback(value, index, object)\n  : indexOf(props, index) < 0\n) result[index] = value"},Sc={init:"true",inLoop:"if (!callback(value, index, collection)) return !result"},Tc={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"result[index] = value",bottom:"  }\n}"},Uc={init:"[]",inLoop:"callback(value, index, collection) && result.push(value)"},Vc={top:"if (thisArg) callback = iteratorBind(callback, thisArg)"},Wc={inLoop:{object:Pc.inLoop}},Xc={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+(Fc?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(value, index, collection)",object:"result"+(Fc?"[ownIndex] = ":".push")+"(callback(value, index, collection))"}};zc&&(q=function(a){return!!a&&!!ec.call(a,"callee")});var Yc=kc||function(a){return ic.call(a)==oc};r(/x/)&&(r=function(a){return ic.call(a)==rc}),s(Mc)||(s=function(a,b){var c=!1;if(!a||"object"!=typeof a||!b&&q(a))return c;var d=a.constructor;return Cc&&"function"!=typeof a.toString&&"string"==typeof(a+"")||r(d)&&!(d instanceof d)?c:Gb?(bd(a,function(b,d){return c=!ec.call(a,d),!1}),c===!1):(bd(a,function(a,b){c=b}),c===!1||ec.call(a,c))});var Zc=f({args:"object",init:"[]",inLoop:"result.push(index)"}),$c=f(Tc,{inLoop:"if (result[index] == null) "+Tc.inLoop}),_c=f(Rc),ad=f(Tc),bd=f(Pc,Vc,Wc,{useHas:!1}),cd=f(Pc,Vc,Wc),dd=f({useHas:!1,args:"object",init:"[]",inLoop:"if (isFunction(value)) result.push(index)",bottom:"result.sort()"}),ed=f({args:"value",init:"true",top:"var className = toString.call(value),\n    length = value.length;\nif (arrayLikeClasses[className]"+(zc?" || isArguments(value)":"")+" ||\n  (className == objectClass && length > -1 && length === length >>> 0 &&\n  isFunction(value.splice))) return !length",inLoop:{object:"return false"}}),fd=mc?function(a){var b=typeof a;return"function"==b&&gc.call(a,"prototype")?Zc(a):a&&Mc[b]?mc(a):[]}:Zc,gd=f(Tc,{args:"object, source, indicator, stack",top:"var destValue, found, isArr, stackLength, recursive = indicator == isPlainObject;\nif (!recursive) stack = [];\nfor (var argsIndex = 1, argsLength = recursive ? 2 : arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"if (value && ((isArr = isArray(value)) || isPlainObject(value))) {\n  found = false; stackLength = stack.length;\n  while (stackLength--) {\n    if (found = stack[stackLength].source == value) break\n  }\n  if (found) {\n    result[index] = stack[stackLength].value\n  } else {\n    destValue = (destValue = result[index]) && isArr\n      ? (isArray(destValue) ? destValue : [])\n      : (isPlainObject(destValue) ? destValue : {});\n    stack.push({ value: destValue, source: value });\n    result[index] = callee(destValue, value, isPlainObject, stack)\n  }\n} else if (value != null) {\n  result[index] = value\n}"}),hd=f(Rc,{top:"if (typeof callback != 'function') {\n  var prop,\n      props = concat.apply(ArrayProto, arguments),\n      length = props.length;\n  for (index = 1; index < length; index++) {\n    prop = props[index];\n    if (prop in object) result[prop] = object[prop]\n  }\n} else {\n  if (thisArg) callback = iteratorBind(callback, thisArg)",inLoop:"if (callback(value, index, object)) result[index] = value",bottom:"}"}),id=f({args:"object",init:"[]",inLoop:"result.push(value)"}),jd=f({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(collection) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (value === target) return true"}),kd=f(Pc,Qc),ld=f(Pc,Sc),md=f(Pc,Uc),nd=f(Pc,Vc,{init:"",inLoop:"if (callback(value, index, collection)) return value"}),od=f(Pc,Vc),pd=f(Pc,Qc,{inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)"}),qd=f(Xc,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)",object:"result"+(Fc?"[ownIndex] = ":".push")+"((isFunc ? methodName : value[methodName]).apply(value, args))"}}),rd=f(Pc,Xc),sd=f(Xc,{args:"collection, property",inLoop:{array:"result[index] = value[property]",object:"result"+(Fc?"[ownIndex] = ":".push")+"(value[property])"}}),td=f({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = iteratorBind(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = iteratee[++index]"},inLoop:{array:"result = callback(result, value, index, collection)",object:"result = noaccum\n  ? (noaccum = false, value)\n  : callback(result, value, index, collection)"}}),ud=f(Pc,Uc,{inLoop:"!"+Uc.inLoop}),vd=f(Pc,Sc,{init:"false",inLoop:Sc.inLoop.replace("!","")}),wd=f(Pc,Qc,Xc,{inLoop:{array:"result[index] = {\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n}",object:"result"+(Fc?"[ownIndex] = ":".push")+"({\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"}),xd=f(Uc,{args:"collection, properties",top:"var props = [];\nforIn(properties, function(value, prop) { props.push(prop) });\nvar propsLength = props.length",inLoop:"for (var prop, pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\n  prop = props[propIndex];\n  if (!(pass = value[prop] === properties[prop])) break\n}\npass && result.push(value)"}),yd=f({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++) {\n    result[funcs[index]] = bind(result[funcs[index]], result)\n  }\n  return result\n}",inLoop:"if (isFunction(result[index])) {\n  result[index] = bind(result[index], result)\n}"});
c.VERSION="0.6.1",c.after=cb,c.bind=db,c.bindAll=yd,c.chain=wb,c.clone=t,c.compact=K,c.compose=eb,c.contains=jd,c.countBy=kd,c.debounce=fb,c.defaults=$c,c.defer=hb,c.delay=gb,c.difference=L,c.drop=_c,c.escape=nb,c.every=ld,c.extend=ad,c.filter=md,c.find=nd,c.first=M,c.flatten=N,c.forEach=od,c.forIn=bd,c.forOwn=cd,c.functions=dd,c.groupBy=pd,c.has=u,c.identity=ob,c.indexOf=O,c.initial=P,c.intersection=Q,c.invoke=qd,c.isArguments=q,c.isArray=Yc,c.isBoolean=v,c.isDate=w,c.isElement=x,c.isEmpty=ed,c.isEqual=y,c.isFinite=z,c.isFunction=r,c.isNaN=B,c.isNull=C,c.isNumber=D,c.isObject=A,c.isRegExp=E,c.isString=F,c.isUndefined=G,c.keys=fd,c.last=R,c.lastIndexOf=S,c.map=rd,c.max=T,c.memoize=ib,c.merge=gd,c.min=U,c.mixin=pb,c.noConflict=qb,c.once=jb,c.partial=kb,c.pick=hd,c.pluck=sd,c.range=V,c.reduce=td,c.reduceRight=I,c.reject=ud,c.rest=W,c.result=rb,c.shuffle=X,c.size=H,c.some=vd,c.sortBy=wd,c.sortedIndex=Y,c.tap=xb,c.template=sb,c.throttle=lb,c.times=tb,c.toArray=J,c.unescape=ub,c.union=Z,c.uniq=$,c.uniqueId=vb,c.values=id,c.where=xd,c.without=_,c.wrap=mb,c.zip=ab,c.zipObject=bb,c.all=ld,c.any=vd,c.collect=rd,c.detect=nd,c.each=od,c.foldl=td,c.foldr=I,c.head=M,c.include=jd,c.inject=td,c.methods=dd,c.omit=_c,c.select=md,c.tail=W,c.take=M,c.unique=$,c._iteratorTemplate=Oc,c._shimKeys=Zc,d.prototype=c.prototype,pb(c),d.prototype.chain=yb,d.prototype.value=zb,od(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=Ib[a];d.prototype[a]=function(){var a=this._wrapped;return b.apply(a,arguments),Fb&&0===a.length&&delete a[0],this._chain&&(a=new d(a),a._chain=!0),a}}),od(["concat","join","slice"],function(a){var b=Ib[a];d.prototype[a]=function(){var a=this._wrapped,c=b.apply(a,arguments);return this._chain&&(c=new d(c),c._chain=!0),c}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a._=c,define(function(){return c})):Hb?"object"==typeof module&&module&&module.exports==Hb?(module.exports=c)._=c:Hb._=c:a._=c}(this),function(){var a=this.math={};a.mean=a.ave=a.average=function(b,c){return a.sum(b,c)/_(b).size()},a.median=function(b){var c=(b.length+1)/2,d=a.sort(b);return d.length%2?d[c-1]:(d[c-1.5]+d[c-.5])/2},a.pow=function(a,b){return _.isNumber(a)?Math.pow(a,b):_.isArray(a)?_.map(a,function(a){return _.pow(a,b)}):void 0},a.scale=function(a,b){var b=b||1,c=_.max(a);return _.map(a,function(a){return a*(b/c)})},a.slope=function(a,b){return(b[1]-a[1])/(b[0]-a[0])},a.sort=function(a){return a.sort(function(a,b){return a-b})},a.stdDeviation=a.sigma=function(a){return Math.sqrt(_(a).variance())},a.sum=function(a,b){if(_.isArray(a)&&"number"==typeof a[0])var c=a;else var b=b||"value",c=_(a).pluck(b);for(var d=0,e=0,f=c.length;f>e;e++)d+=c[e];return d},a.transpose=function(a){var b=[];return _(a).each(function(a,c){_(a).each(function(a,d){b[d]||(b[d]=[]),b[d][c]=a})}),b},a.variance=function(a){var b=_(a).mean();return _(a).chain().map(function(a){return _(a-b).pow(2)}).mean().value()},_.mixin(a)}(),function(a){function b(a){var b,c,d=o[a]={};for(a=a.split(/\s+/),b=0,c=a.length;c>b;b++)d[a[b]]=!0;return d}var c={},d=Array.prototype,e=Object.prototype,f=e.hasOwnProperty,g=e.toString,h=d.forEach,i=d.slice,j=function(a,b,d){var e,g,i;if(a)if(h&&a.forEach===h)a.forEach(b,d);else if(a.length===+a.length){for(g=0,i=a.length;i>g;g++)if(g in a&&b.call(d,a[g],g,a)===c)return}else for(e in a)if(f.call(a,e)&&b.call(d,a[e],e,a)===c)return},k=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},l={"[object Array]":"array","[object Function]":"function"},m=function(a){return a?l[g.call(a)]||"object":String(a)},n={},o={};n.Callbacks=function(a){a=a?o[a]||b(a):{};var c,d,e,f,g,h,i=[],j=[],k=function(b){var c,d,e,f;for(c=0,d=b.length;d>c;c++)e=b[c],f=m(e),"array"===f?k(e):"function"===f&&(!a.unique||!n.has(e))&&i.push(e)},l=function(b,k){for(k=k||[],c=!a.memory||[b,k],d=!0,e=!0,h=f||0,f=0,g=i.length;i&&g>h;h++)if(i[h].apply(b,k)===!1&&a.stopOnFalse){c=!0;break}e=!1,i&&(a.once?c===!0?n.disable():i=[]:j&&j.length&&(c=j.shift(),n.fireWith(c[0],c[1])))},n={add:function(){if(i){var a=i.length;k(arguments),e?g=i.length:c&&c!==!0&&(f=a,l(c[0],c[1]))}return this},remove:function(){if(i)for(var b=arguments,c=0,d=b.length;d>c;c++)for(var f=0;f<i.length&&(b[c]!==i[f]||(e&&g>=f&&(g--,h>=f&&h--),i.splice(f--,1),!a.unique));f++);return this},has:function(a){if(i)for(var b=0,c=i.length;c>b;b++)if(a===i[b])return!0;return!1},empty:function(){return i=[],this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,(!c||c===!0)&&n.disable(),this},locked:function(){return!j},fireWith:function(b,d){return j&&(e?a.once||j.push([b,d]):(!a.once||!c)&&l(b,d)),this},fire:function(){return n.fireWith(this,arguments),this},fired:function(){return!!d}};return n},n.Deferred=function(a){var b,c=n.Callbacks("once memory"),d=n.Callbacks("once memory"),e=n.Callbacks("memory"),f="pending",g={resolve:c,reject:d,notify:e},h={done:c.add,fail:d.add,progress:e.add,state:function(){return f},isResolved:c.fired,isRejected:d.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return n.Deferred(function(d){j({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c,e=a[0],f=a[1];k(e)?i[b](function(){c=e.apply(this,arguments),c&&k(c.promise)?c.promise().then(d.resolve,d.reject,d.notify):d[f+"With"](this===i?d:this,[c])}):i[b](d[f])})}).promise()},promise:function(a){if(a)for(var b in h)a[b]=h[b];else a=h;return a}},i=h.promise({});for(b in g)i[b]=g[b].fire,i[b+"With"]=g[b].fireWith;return i.done(function(){f="resolved"},d.disable,e.lock).fail(function(){f="rejected"},c.disable,e.lock),a&&a.call(i,i),i},n.when=function(a){function b(a){return function(b){d[a]=arguments.length>1?i.call(arguments,0):b,--h||j.resolveWith(j,d)}}function c(a){return function(b){g[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(l,g)}}var d=i.call(arguments,0),e=0,f=d.length,g=new Array(f),h=f,j=1>=f&&a&&k(a.promise)?a:n.Deferred(),l=j.promise();if(f>1){for(;f>e;e++)d[e]&&d[e].promise&&k(d[e].promise)?d[e].promise().then(b(e),j.reject,c(e)):--h;h||j.resolveWith(j,d)}else j!==a&&j.resolveWith(j,f?[a]:[]);return l},"undefined"!=typeof module&&module.exports?module.exports=n:"undefined"!=typeof a._?a._.mixin(n):a._=n}(this),function(a,b){var c=a.Miso||(a.Miso={});c.typeOf=function(a,d){var e,f=b.keys(c.types);return f.push(f.splice(b.indexOf(f,"string"),1)[0]),f.push(f.splice(b.indexOf(f,"mixed"),1)[0]),e=b.find(f,function(b){return c.types[b].test(a,d)}),e=b.isUndefined(e)?"string":e},c.types={mixed:{name:"mixed",coerce:function(a){return b.isNull(a)||"undefined"==typeof a||b.isNaN(a)?null:a},test:function(){return!0},compare:function(a,c){return b.isEqual(a,c)?0:c>a?-1:a>c?1:void 0},numeric:function(a){return null===a||b.isNaN(+a)?null:+a}},string:{name:"string",coerce:function(a){return b.isNaN(a)||null===a||"undefined"==typeof a?null:a.toString()},test:function(a){return null===a||"undefined"==typeof a||"string"==typeof a},compare:function(a,b){return null==a&&null!=b?-1:null!=a&&null==b?1:b>a?-1:a>b?1:0},numeric:function(a){return b.isNaN(+a)||null===a?null:b.isNumber(+a)?+a:null}},"boolean":{name:"boolean",regexp:/^(true|false)$/,coerce:function(a){return b.isNaN(a)||null===a||"undefined"==typeof a?null:"false"===a?!1:Boolean(a)},test:function(a){return null===a||"undefined"==typeof a||"boolean"==typeof a||this.regexp.test(a)?!0:!1},compare:function(a,b){return null==a&&null!=b?-1:null!=a&&null==b?1:null==a&&null==b?0:a===b?0:b>a?-1:1},numeric:function(a){return null===a||b.isNaN(a)?null:a?1:0}},number:{name:"number",regexp:/^\s*[\-\.]?[0-9]+([\.][0-9]+)?\s*$/,coerce:function(a){var c=+a;return b.isNull(a)||"undefined"==typeof a||b.isNaN(c)?null:c},test:function(a){return null===a||"undefined"==typeof a||"number"==typeof a||this.regexp.test(a)?!0:!1},compare:function(a,b){return null==a&&null!=b?-1:null!=a&&null==b?1:null==a&&null==b?0:a===b?0:b>a?-1:1},numeric:function(a){return b.isNaN(a)||null===a?null:a}},time:{name:"time",format:"DD/MM/YYYY",_formatLookup:[["DD","\\d{2}"],["D","\\d{1}|\\d{2}"],["MM","\\d{2}"],["M","\\d{1}|\\d{2}"],["YYYY","\\d{4}"],["YY","\\d{2}"],["A","[AM|PM]"],["hh","\\d{2}"],["h","\\d{1}|\\d{2}"],["mm","\\d{2}"],["m","\\d{1}|\\d{2}"],["ss","\\d{2}"],["s","\\d{1}|\\d{2}"],["ZZ","[-|+]\\d{4}"],["Z","[-|+]\\d{2}:\\d{2}"]],_regexpTable:{},_regexp:function(a){if(this._regexpTable[a])return new RegExp(this._regexpTable[a],"g");var c=a;return b.each(this._formatLookup,function(a){c=c.replace(a[0],a[1])},this),c=c.split("/").join("\\/"),this._regexpTable[a]=c,new RegExp(this._regexpTable[a],"g")},coerce:function(a,c){if(c=c||{},b.isNull(a)||"undefined"==typeof a||b.isNaN(a))return null;if(b.isString(a)){{c.format||this.format}return moment(a,c.format)}return b.isNumber(a)?moment(a):a},test:function(a,c){if(c=c||{},null===a||"undefined"==typeof a)return!0;if(b.isString(a)){var d=c.format||this.format,e=this._regexp(d);return e.test(a)}return!0},compare:function(a,b){return b>a?-1:a>b?1:0},numeric:function(a){return b.isNaN(a)||null===a?null:a.valueOf()}}}}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Event=function(a){b.isArray(a)||(a=[a]),this.deltas=a},b.extend(c.Event.prototype,{affectedColumns:function(){var a=[];return b.each(this.deltas,function(c){c.old=c.old||[],c.changed=c.changed||[],a=b.chain(a).union(b.keys(c.old),b.keys(c.changed)).reject(function(a){return"_id"===a}).value()}),a}}),b.extend(c.Event,{isRemove:function(a){return b.isUndefined(a.changed)||0===b.keys(a.changed).length?!0:!1},isAdd:function(a){return b.isUndefined(a.old)||0===b.keys(a.old).length?!0:!1},isUpdate:function(a){return this.isRemove(a)||this.isAdd(a)?!1:!0}}),c.Events={},c.Events.bind=function(a,b,c){var d=this._callbacks||(this._callbacks={}),e=d[a]||(d[a]={}),f=e.tail||(e.tail=e.next={});return f.callback=b,f.context=c,e.tail=f.next={},this},c.Events.unbind=function(a,b){var c,d,e;if(a){if(c=this._callbacks)if(b){if(d=c[a])for(;(e=d)&&(d=d.next);)if(d.callback===b){e.next=d.next,d.context=d.callback=null;break}}else c[a]={}}else this._callbacks=null;return this},c.Events.trigger=function(a){var b,c,d,e,f,g=["all",a];if(!(c=this._callbacks))return this;for(;f=g.pop();)if(b=c[f])for(e="all"===f?arguments:Array.prototype.slice.call(arguments,1);b=b.next;)(d=b.callback)&&d.apply(b.context||this,e);return this},c.Events._buildEvent=function(a){return new c.Event(a)}}(this,_),function(a,b){var c=a.Miso||{};c.Builder={detectColumnType:function(a,d){var e=b.inject(d.slice(0,5),function(a,d){var e=c.typeOf(d);return""!==d&&-1===a.indexOf(e)&&!b.isNull(d)&&a.push(e),a},[]);return a.type=1===e.length?e[0]:"mixed",a},detectColumnTypes:function(a,d){b.each(d,function(b,d){var e=a.column(d);return e.type?(e.force=!0,void 0):(c.Builder.detectColumnType(e,b),void 0)},this)},cacheRows:function(a){c.Builder.clearRowCache(a),b.each(a._columns[a._columnPositionByName._id].data,function(b,c){a._rowPositionById[b]=c,a._rowIdByPosition.push(b)},a);var d=b.uniq(b.map(a._columns,function(a){return a.data.length}));if(d.length>1)throw new Error("Row lengths need to be the same. Empty values should be set to null."+b.map(a._columns,function(a){return a.data+"|||"}));a.length=d[0]},clearRowCache:function(a){a._rowPositionById={},a._rowIdByPosition=[]},cacheColumns:function(a){a._columnPositionByName={},b.each(a._columns,function(b,c){a._columnPositionByName[b.name]=c})}},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c;return-1})}(this,_),function(a,b){var c=a.Miso;c.Column=function(a){return b.extend(this,a),this._id=a.id||b.uniqueId(),this.data=a.data||[],this},b.extend(c.Column.prototype,{toNumeric:function(a){return c.types[this.type].numeric(a)},numericAt:function(a){return this.toNumeric(this.data[a])},coerce:function(){this.data=b.map(this.data,function(a){return c.types[this.type].coerce(a,this)},this)},compute:function(a,b){if(this.func){var c=this.func(a);return"undefined"!=typeof b?this.data[b]=c:this.data.push(c),c}},isComputed:function(){return!b.isUndefined(this.func)},_sum:function(){return b.sum(this.data)},_mean:function(){for(var a=0,b=0;b<this.data.length;b++)a+=this.numericAt(b);return a/=this.data.length,c.types[this.type].coerce(a,this)},_median:function(){return c.types[this.type].coerce(b.median(this.data),this)},_max:function(){for(var a=-1/0,b=0;b<this.data.length;b++)null!==this.data[b]&&c.types[this.type].compare(this.data[b],a)>0&&(a=this.numericAt(b));return c.types[this.type].coerce(a,this)},_min:function(){for(var a=1/0,b=0;b<this.data.length;b++)null!==this.data[b]&&c.types[this.type].compare(this.data[b],a)<0&&(a=this.numericAt(b));return c.types[this.type].coerce(a,this)}}),c.DataView=function(a){if("undefined"!=typeof a){if(a=a||(a={}),b.isUndefined(a.parent))throw new Error("A view must have a parent specified.");this.parent=a.parent,this._initialize(a)}},b.extend(c.DataView.prototype,{_initialize:function(a){this.parent.syncable===!0&&(b.extend(this,c.Events),this.syncable=!0),this.filter={columns:this._columnFilter(a.filter.columns||void 0),rows:this._rowFilter(a.filter.rows||void 0)},this._columns=this._selectData(),c.Builder.cacheColumns(this),c.Builder.cacheRows(this),this.syncable&&this.parent.bind("change",this._sync,this)},_sync:function(a){var d=a.deltas,e=null;b.each(d,function(d,f){var g=this._rowPositionById[d._id];if("undefined"==typeof g&&c.Event.isAdd(d))this.filter.rows&&this.filter.rows(d.changed)&&(this._add(d.changed),e="add");else{if("undefined"===g)return;b.each(d.changed,function(a,c){var d=this._columnPositionByName[c];b.isUndefined(d)||(this._columns[d].data[g]=a,e="update")},this)}var h=this.rowByPosition(g);if(c.Event.isRemove(d)||this.filter.row&&!this.filter.row(h)){var i={_id:d._id,old:this.rowByPosition(g),changed:{}};a.deltas.splice(f,1,i),this._remove(g),e="delete"}},this),this.syncable&&(this.trigger(e,a),this.trigger("change",a))},where:function(a,d){return d=d||{},d.filter=d.filter||{},b.isFunction(a)?d.filter.rows=a:d.filter=a,d.parent=this,new c.DataView(d)},_selectData:function(){var a=[];return b.each(this.parent._columns,function(b){this.filter.columns(b)&&a.push(new c.Column({name:b.name,data:[],type:b.type,_id:b._id}))},this),this.parent.each(function(b){if(this.filter.rows(b))for(var c=0;c<a.length;c++)a[c].data.push(b[a[c].name])},this),a},_columnFilter:function(a){var c;return b.isUndefined(a)?c=function(){return!0}:(b.isString(a)&&(a=[a]),a.push("_id"),c=function(c){return-1===b.indexOf(a,c.name)?!1:!0}),c},_rowFilter:function(a){var c;return b.isNumber(a)&&(a=[a]),c=b.isUndefined(a)?function(){return!0}:b.isFunction(a)?a:function(c){return-1===b.indexOf(a,c._id)?!1:!0}},column:function(a){return this._column(a)},_column:function(a){if(b.isUndefined(this._columnPositionByName))return void 0;var c=this._columnPositionByName[a];return this._columns[c]},columns:function(a){return new c.DataView({filter:{columns:a},parent:this})},columnNames:function(){var a=b.pluck(this._columns,"name");return b.reject(a,function(a){return"_id"===a||"_oids"===a})},hasColumn:function(a){return!b.isUndefined(this._columnPositionByName[a])},each:function(a,b){for(var c=0;c<this.length;c++)a.apply(b||this,[this.rowByPosition(c),c])},reverseEach:function(a,b){for(var c=this.length-1;c>=0;c--)a.apply(b||this,[this.rowByPosition(c),c])},eachColumn:function(a,b){for(var c=this.columnNames(),d=0;d<c.length;d++)a.apply(b||this,[c[d],this.column(c[d]),d])},rowByPosition:function(a){return this._row(a)},rowById:function(a){return this._row(this._rowPositionById[a])},_row:function(a){var c={};return b.each(this._columns,function(b){c[b.name]=b.data[a]}),c},_remove:function(a){var c=this._rowPositionById[a];return b.each(this._columns,function(a){a.data.splice(c,1)}),delete this._rowPositionById[a],this._rowIdByPosition.splice(c,1),this.length--,this},_add:function(a){if(b.each(a,function(d,e){var f=this.column(e);if(f.isComputed())throw"You're trying to update a computed column. Those get computed!";if("undefined"!=typeof f){var g=c.types[f.type];if(!f.force&&!g.test(a[f.name],f))throw"incorrect value '"+a[f.name]+"' of type "+c.typeOf(a[f.name],f)+" passed to column '"+f.name+"' with type "+f.type;b.isUndefined(f.before)||(a[f.name]=f.before(a[f.name])),a[f.name]=g.coerce(a[f.name],f)}},this),this._computedColumns&&b.each(this._computedColumns,function(b){var c=b.compute(a);a[b.name]=c}),b.isUndefined(this.comparator))b.each(this._columns,function(c){c.isComputed()||c.data.push(b.isUndefined(a[c.name])||b.isNull(a[c.name])?null:a[c.name])}),this.length++,this._rowIdByPosition=this._rowIdByPosition||(this._rowIdByPosition=[]),this._rowPositionById=this._rowPositionById||(this._rowPositionById={}),this._rowIdByPosition.push(a._id),this._rowPositionById[a._id]=this._rowIdByPosition.length;else{var d,e=function(a,b,c){Array.prototype.splice.apply(c,[a,0].concat(b))};for(this.length++,d=0;d<this.length;d++){var f=this.rowByPosition(d);if(b.isUndefined(f._id)||this.comparator(a,f)<0){b.each(this._columns,function(b){e(d,a[b.name]?a[b.name]:null,b.data)});break}}this._rowIdByPosition=[],this._rowPositionById={},this.each(function(a,b){this._rowIdByPosition.push(a._id),this._rowPositionById[a._id]=b})}return this},rows:function(a){return new c.DataView({filter:{rows:a},parent:this})},sort:function(a){var c={};if(b.isFunction(a)?c.comparator=a:c=a||c,c.comparator&&(this.comparator=c.comparator),b.isUndefined(this.comparator))throw new Error("Cannot sort without this.comparator.");var d,e=this.length;if(1!==e){var f=b.bind(function(a,c){var d=this.rowByPosition(c);b.each(d,function(b,d){var e=this._columnPositionByName[d],f=this._columns[e].data[a];this._columns[e].data.splice(a,1,b),this._columns[e].data.splice(c,1,f)},this)},this),g=b.bind(function(a,b){for(var c,d=a;b>=2*d;){c=2*d;var e=this.rowByPosition(d);if(b>c+1&&this.comparator(this.rowByPosition(c),this.rowByPosition(c+1))<0&&c++,!(this.comparator(e,this.rowByPosition(c))<0))return;f(d,c),d=c}},this),h=function(a){for(var b=Math.round((a-2)/2);b>=0;)g(b,a-1),b--};if(e>2)for(h(e),d=e-1;d>1;)f(d,0),d--,g(0,d);else this.comparator(this.rowByPosition(0),this.rowByPosition(1))>0&&f(0,1);return this.comparator(this.rowByPosition(this.length-2),this.rowByPosition(this.length-1))>0&&f(this.length-1,this.length-2),this.syncable&&c.silent&&this.trigger("sort"),this}},toJSON:function(){for(var a=[],b=0;b<this.length;b++)a.push(this.rowByPosition(b));return a}})}(this,_),function(a,b){var c=a.Miso;c.Product=c.Product||function(a){if(a=a||{},this.func=a.func,a.columns){var c=a.columns;b.isArray(a.columns)&&(c=a.columns[0]),this.valuetype=c.type,this.numeric=function(){return c.toNumeric(this.value)}}return this.func({silent:!0}),this},b.extend(c.Product.prototype,c.Events,{val:function(){return this.value},type:function(){return this.valuetype},_sync:function(){this.func()},_buildDelta:function(a,b){return{old:a,changed:b}}}),c.Product.define=function(a){return function(d,e){e=e||{};var f=this._findColumns(d),g=this;e.type=e.type||f[0].type,e.typeOptions=e.typeOptions||f[0].typeOptions;var h=function(){var b=a.call(g,f,e);return c.types[e.type].coerce(b,e.typeOptions)};if(this.syncable){var i=new c.Product({columns:f,func:function(a){a=a||{};var c=this._buildDelta(this.value,h.call(g));if(this.value=c.changed,g.syncable){var d=this._buildEvent(c);!b.isUndefined(c.old)&&!a.silent&&c.old!==c.changed&&this.trigger("change",d)}}});return this.bind("change",i._sync,i),i}return h.call(g)}},b.extend(c.DataView.prototype,{_findColumns:function(a){var c=[];return b.isUndefined(a)&&(a=this.columnNames()),a=b.isArray(a)?a:[a],b.each(a,function(a){a=this._columns[this._columnPositionByName[a]],c.push(a)},this),c},sum:c.Product.define(function(a){return b.each(a,function(a){if(a.type===c.types.time.name)throw new Error("Can't sum up time")}),b.sum(b.map(a,function(a){return a._sum()}))}),max:c.Product.define(function(a){return b.max(b.map(a,function(a){return a._max()}))}),min:c.Product.define(function(a){return b.min(b.map(a,function(a){return a._min()}))}),mean:c.Product.define(function(a){var d=[];b.each(a,function(a){d.push(a.data)}),d=b.flatten(d);var e=a[0].type;return d=b.map(d,function(a){return c.types[e].numeric(a)}),b.mean(d)})})}(this,_),function(a,b){var c=a.Miso;c.Dataset=function(a){this.length=0,this._columns=[],this._columnPositionByName={},this._computedColumns=[],"undefined"!=typeof a&&(a=a||{},this._initialize(a))},c.Dataset.prototype=new c.DataView,b.extend(c.Dataset.prototype,{_initialize:function(a){a.sync===!0&&(b.extend(this,c.Events),this.syncable=!0),this.importer=a.importer||null,this.parser=a.parser||c.Parsers.Obj,b.isUndefined(a.parser)&&(a.strict?this.parser=c.Parsers.Strict:a.delimiter&&(this.parser=c.Parsers.Delimited)),null===this.importer&&(a.url?a.interval?(this.importer=c.Importers.Polling,this.interval=a.interval):this.importer=c.Importers.Remote:this.importer=c.Importers.Local),this.parser=new this.parser(a),this.parser instanceof c.Parsers.Delimited&&(a.dataType="text"),this.importer=new this.importer(a),a.comparator&&(this.comparator=a.comparator),a.ready&&(this.ready=a.ready),a.resetOnFetch&&(this.resetOnFetch=a.resetOnFetch),a.uniqueAgainst&&(this.uniqueAgainst=a.uniqueAgainst),b.isUndefined(a.data)&&b.isUndefined(a.url)&&this._addIdColumn(),this.deferred=a.deferred?a.deferred:new b.Deferred,a.columns&&this.addColumns(a.columns)},fetch:function(a){a=a||{};var c=this.deferred;if(b.isNull(this.importer))throw"No importer defined";return this.importer.fetch({success:b.bind(function(b){try{this._apply(b)}catch(d){if(!a.error)throw d;a.error.call(this,d)}this.comparator&&this.sort(),this.ready&&this.ready.call(this),a.success&&a.success.call(this),c.resolveWith(this,[this])},this),error:b.bind(function(b){a.error&&a.error.call(this,b),c.reject(b)},this)}),c.promise()},_applications:{againstColumn:function(a){var d=(b.keys(a),this.uniqueAgainst),e=this.column(d),f=[],g=[];b.each(a[d],function(d,h){var i=e.data.indexOf(c.types[e.type].coerce(d)),j={};if(b.each(a,function(a,b){j[b]=a[h]}),-1===i)f.push(j);else{g.push(j);var k=this.rowById(this.column("_id").data[i])._id;this.update(k,j)}},this),f.length>0&&this.add(f)},blind:function(a){for(var c,d=[],e=b.keys(a),f=b.max(b.map(e,function(b){return a[b].length},this)),g=0;f>g;g++){c={};for(var h=0;h<e.length;h++)c[e[h]]=a[e[h]][g];d.push(c)}this.add(d)}},_apply:function(a){var d=this.parser.parse(a);if(this.fetched)if(this.resetOnFetch)this.reset(),this._applications.blind.call(this,d.data);else if(this.uniqueAgainst){if(!this.hasColumn(this.uniqueAgainst))throw new Error("You requested a unique add against a column that doesn't exist.");this._applications.againstColumn.call(this,d.data)}else this._applications.blind.call(this,d.data);else this._addIdColumn(),this.addColumns(b.map(d.columns,function(a){return{name:a}})),c.Builder.detectColumnTypes(this,d.data),this._applications.blind.call(this,d.data),this.fetched=!0;c.Builder.cacheRows(this)},addColumns:function(a){b.each(a,function(a){this.addColumn(a)},this)},addComputedColumn:function(a,d,e){if(!b.isUndefined(this.column(a)))throw"There is already a column by this name.";if("undefined"==typeof c.types[d])throw"The type "+d+" doesn't exist";var f=new c.Column({name:a,type:d,func:b.bind(e,this)});return this._columns.push(f),this._computedColumns.push(f),this._columnPositionByName[f.name]=this._columns.length-1,this.length>0&&this.each(function(a,b){f.compute(a,b)},this),f},addColumn:function(a){return b.isUndefined(this.column(a.name))?(a=new c.Column(a),this._columns.push(a),this._columnPositionByName[a.name]=this._columns.length-1,a):!1},_addIdColumn:function(a){if(b.isUndefined(this.column("_id"))){var c=[];if(a&&a>0&&b.times(a,function(){c.push(b.uniqueId())}),this.addColumn({name:"_id",type:"number",data:c}),0!==this._columnPositionByName._id){var d=this._columns[this._columnPositionByName._id],e=this._columnPositionByName._id;this._columns.splice(e,1),this._columns.unshift(d),this._columnPositionByName._id=0,b.each(this._columnPositionByName,function(a,b){"_id"!==b&&this._columnPositionByName[b]<e&&this._columnPositionByName[b]++},this)}}},add:function(a,c){c=c||{},b.isArray(a)||(a=[a]);var d=[];if(b.each(a,function(a){a._id||(a._id=b.uniqueId()),this._add(a,c),this.syncable&&!c.silent&&d.push({changed:a})},this),this.syncable&&!c.silent){var e=this._buildEvent(d);this.trigger("add",e),this.trigger("change",e)}return this},remove:function(a,c){a=this._rowFilter(a);var d=[],e=[];if(this.each(function(b){a(b)&&(e.push(b._id),d.push({old:b}))}),b.each(e,function(a){this._remove(a)},this),this.syncable&&(!c||!c.silent)){var f=this._buildEvent(d);this.trigger("remove",f),this.trigger("change",f)}},update:function(a,d,e){var f,g=[],h=b.bind(function(a,e){var h,i;i=b.isFunction(d)?d.apply(this,[a]):d,f=b.keys(i),b.each(f,function(a){if(h=this.column(a),h.isComputed())throw"You're trying to update a computed column. Those get computed!";var d=c.types[h.type];if(d){if(!d.test(i[h.name],h))throw"incorrect value '"+i[h.name]+"' of type "+c.typeOf(i[h.name],h)+" passed to column '"+h.name+"' with type "+h.type;b.isUndefined(h.before)||(i[h.name]=h.before(i[h.name])),i[h.name]=d.coerce(i[h.name],h)}h.data[e]=i[h.name]},this),"undefined"!=typeof this._computedColumns&&b.each(this._computedColumns,function(c){var d=b.extend({},a,i),f=d[c.name],g=c.compute(d,e);f!==g&&(i[c.name]=g)}),g.push({_id:a._id,old:a,changed:i})},this);if(b.isString(a)&&(a=[a]),b.isArray(a)){var i,j;b.each(a,function(a){i=this.rowById(a),j=this._rowPositionById[a],h(i,j)})}else a=this._rowFilter(a),this.each(function(b,c){a(b)&&h(b,c)},this);if(this.syncable&&(!e||!e.silent)){var k=this._buildEvent(g);this.trigger("update",k),this.trigger("change",k)}return this},reset:function(a){b.each(this._columns,function(a){a.data=[]}),this.length=0,this.syncable&&(!a||!a.silent)&&this.trigger("reset")}})}(this,_,moment),function(a,b){var c=a.Miso||(a.Miso={});c.Derived=function(a){a=a||{},c.Dataset.call(this),this.parent=a.parent,this.method=a.method,this._addIdColumn(),this.addColumn({name:"_oids",type:"mixed"}),this.parent.syncable&&(b.extend(this,c.Events),this.syncable=!0,this.parent.bind("change",this._sync,this))},c.Derived.prototype=new c.Dataset,b.extend(c.Derived.prototype,{_sync:function(){this.func.call(this.args),this.trigger("change")}}),b.extend(c.DataView.prototype,{movingAverage:function(a,d,e){e=e||{};var f=new c.Derived({parent:this,method:e.method||b.mean,size:d,args:arguments});this.eachColumn(function(a){f.addColumn({name:a,type:this.column(a).type,data:[]})},this),c.Builder.cacheColumns(f);var g=function(){"string"==typeof a&&(a=[a]),this.column("_id").data=this.parent.column("_id").data.slice(d-1,this.parent.length),this.eachColumn(function(c,e){e.data=-1===a.indexOf(c)&&"_oids"!==c?this.parent.column(c).data.slice(d-1,this.parent.length):b.movingAvg(this.parent.column(c).data,d,this.method)},this),this.length=this.parent.length-d+1;var e=this.column("_oids");e.data=[];for(var f=0;f<this.length;f++)e.data.push(this.parent.column("_id").data.slice(f,f+d));return c.Builder.cacheRows(this),this};return f.func=b.bind(g,f),f.func.call(f.args)},countBy:function(a,d){function e(a,b,d){var e;for(e=0;e<a.length;e++)if(0===c.types[d].compare(a[e],b))return e;return-1}d=d||{};var f=new c.Derived({parent:this,method:b.sum,args:arguments}),g=this.column(a);f.addColumn({name:a,type:g.type}),f.addColumn({name:"count",type:"number"}),f.addColumn({name:"_oids",type:"mixed"}),c.Builder.cacheColumns(f);var h=f._column(a).data,i=f._column("count").data,j=f._column("_oids").data,k=f._column("_id").data;return this.each(function(c){var d=e(h,c[a],g.type);-1===d?(h.push(c[a]),k.push(b.uniqueId()),i.push(1),j.push([c._id])):(i[d]+=1,j[d].push(c._id))}),c.Builder.cacheRows(f),f},groupBy:function(a,d,e){e=e||{};var f=new c.Derived({parent:this,method:e.method||b.sum,args:arguments});e&&e.preprocess&&(f.preprocess=e.preprocess);var g=b.union([a],d);b.each(g,function(a){this.addColumn({name:a,type:this.parent.column(a).type})},f),c.Builder.cacheColumns(f);var h=function(){c.Builder.clearRowCache(this);for(var e={},f=0,g=(this._columnPositionByName[a],this.parent.column(a)),h=0;h<this.parent.length;h++){var i=null;i=this.preprocess?this.preprocess(g.data[h]):g.data[h],b.isUndefined(e[i])&&(e[i]=f,b.each(d,function(a){var c=this.column(a),d=this.column("_id");c.data[f]=[],d.data[f]=b.uniqueId()},this),this.column(a).data[f]=i,f++),b.each(d,function(a){var b=this.column(a),c=(this.parent.column(a).data[h],e[i]);b.data[c].push(this.parent.rowByPosition(h))},this)}var j=this._columns[this._columnPositionByName._oids];return j.data=[],b.each(d,function(a){var c=this.column(a);b.each(c.data,function(d,e){b.isArray(d)&&(j.data[e]=j.data[e]||[],j.data[e].push(b.map(d,function(a){return a._id})),j.data[e]=b.flatten(j.data[e]),c.data[e]=this.method(b.map(d,function(b){return b[a]})),this.length++)},this)},this),c.Builder.cacheRows(this),this};return f.func=b.bind(h,f),f.func.call(f.args)}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers=function(){},c.Importers.prototype.extract=function(a){return a=b.clone(a)}}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers.Local=function(a){a=a||{},this.data=a.data||null,this.extract=a.extract||this.extract},b.extend(c.Importers.Local.prototype,c.Importers.prototype,{fetch:function(a){var b=a.data?a.data:this.data;a.success(this.extract(b))}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers.Remote=function(a){a=a||{},this._url=a.url,this.extract=a.extract||this.extract,this.params={type:"GET",url:b.isFunction(this._url)?b.bind(this._url,this):this._url,dataType:a.dataType?a.dataType:a.jsonp?"jsonp":"json",callback:a.callback}},b.extend(c.Importers.Remote.prototype,c.Importers.prototype,{fetch:function(a){var d=b.bind(function(b){a.success(this.extract(b))},this);this.callback&&(window[this.callback]=d),c.Xhr(b.extend(this.params,{success:this.callback?this.callback:d,error:a.error}))}});var d={url:"",data:"",dataType:"",success:function(){},type:"GET",async:!0,xhr:function(){return a.ActiveXObject?new a.ActiveXObject("Microsoft.XMLHTTP"):new a.XMLHttpRequest}},e=/\?/;c.Xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;var f=b.isFunction(a.url)?a.url():a.url;if(a.dataType&&("jsonp"===a.dataType||"script"===a.dataType))return c.Xhr.getJSONP(f,a.success,"script"===a.dataType,a.error,a.callback),void 0;var g=b.extend({},d,a,{url:f});return g.ajax=g.xhr(),g.ajax?("GET"===g.type&&g.data&&(g.url+=(e.test(g.url)?"&":"?")+g.data,g.data=null),g.ajax.open(g.type,g.url,g.async),g.ajax.send(g.data||null),c.Xhr.httpData(g)):void 0},c.Xhr.getJSONP=function(a,c,d,e,f){if(d){var g=document.querySelectorAll('script[src="'+a+'"]');if(g.length)return c&&c(!0),void 0}var h,i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,j=document.createElement("script"),k=a.split("?")[1],l=!1,m=[];if(k&&!d&&(m=k.split("&")),m.length&&(h=m[m.length-1].split("=")),!f){var n=b.uniqueId("callback");f=m.length?h[1]?h[1]:n:n}!k&&!d&&(a+="?"),k&&/callback/.test(k)||(k&&(a+="&"),a+="callback="+f),f&&!d&&(!window[f]||(f=f+ +new Date+b.uniqueId()),window[f]=function(a){c&&c(a),l=!0},h&&(a=a.replace(h.join("="),h[0]+"="+f))),j.onload=j.onreadystatechange=function(){if((!j.readyState||/loaded|complete/.test(j.readyState))&&(d&&c&&c(),l)){try{delete window[f]}catch(a){window[f]=void 0}i.removeChild(j)}},j.onerror=function(a){e&&e.call(null,a)},j.src=a,i.insertBefore(j,i.firstChild)},c.Xhr.httpData=function(a){var b,c=null;return a.ajax.onreadystatechange=function(){if(4===a.ajax.readyState){try{c=JSON.parse(a.ajax.responseText)}catch(d){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:c},a.dataType&&(b=b[a.dataType]),/(2..)/.test(a.ajax.status)?a.success.call(a.ajax,b):a.error&&a.error.call(null,a.ajax.statusText)
}},b}}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers.Polling=function(a){a=a||{},this.interval=a.interval||1e3,this._def=null,c.Importers.Remote.apply(this,[a])},b.extend(c.Importers.Polling.prototype,c.Importers.Remote.prototype,{fetch:function(d){null===this._def&&(this._def=b.Deferred(),this.success_callback=b.bind(function(a){d.success(this.extract(a)),this._def.resolve(this)},this),this.error_callback=b.bind(function(a){d.error(a),this._def.reject(a)},this)),b.when(this._def.promise()).then(function(a){var c=b.bind(function(){this.fetch({success:this.success_callback,error:this.error_callback})},a);a._timeout=setTimeout(c,a.interval),a._def=b.Deferred()}),c.Xhr(b.extend(this.params,{success:this.success_callback,error:this.error_callback})),a.imp=this},stop:function(){null!==this._def&&this._def.reject(),"undefined"!=typeof this._timeout&&clearTimeout(this._timeout)},start:function(){null!==this._def&&(this._def=b.Deferred(),this.fetch())}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers.GoogleSpreadsheet=function(a){if(a=a||{},a.url)a.url=a.url;else{if(b.isUndefined(a.key))throw new Error("Set options 'key' properties to point to your google document.");a.fast?(a.url="https://spreadsheets.google.com/tq?key="+a.key,"undefined"==typeof a.sheetName&&(a.sheetName="Sheet1"),a.url+="&sheet="+a.sheetName,this.callback="misodsgs"+(new Date).getTime(),a.url+="&tqx=version:0.6;responseHandler:"+this.callback,a.url+=";reqId:0;out:json&tq&_=1335871249558#",delete a.sheetName):a.url="https://spreadsheets.google.com/feeds/cells/"+a.key+"/"+a.worksheet+"/public/basic?alt=json-in-script&callback=",delete a.key}return this.params={type:"GET",url:a.url,dataType:"jsonp"},this},b.extend(c.Importers.GoogleSpreadsheet.prototype,c.Importers.Remote.prototype)}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers=function(a){this.options=a||{}},b.extend(c.Parsers.prototype,{parse:function(){}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers.Strict=function(a){this.options=a||{}},b.extend(c.Parsers.Strict.prototype,c.Parsers.prototype,{parse:function(a){var c={},d=[];return b.each(a.columns,function(a){if(-1!==d.indexOf(a.name))throw new Error('You have more than one column named "'+a.name+'"');d.push(a.name),c[a.name]=a.data}),{columns:d,data:c}}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers.Obj=c.Parsers,b.extend(c.Parsers.Obj.prototype,c.Parsers.prototype,{parse:function(a){var c=b.keys(a[0]),d={};return b.each(c,function(a){d[a]=[]}),b.each(c,function(c){b.times(a.length,function(b){d[c].push(a[b][c])})}),{columns:c,data:d}}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers.GoogleSpreadsheet=function(a){this.fast=a.fast||!1},b.extend(c.Parsers.GoogleSpreadsheet.prototype,c.Parsers.prototype,{parse:function(a){var c,d=[],e=[],f={};if("undefined"!=typeof a.status&&"error"===a.status)throw new Error("You can't use the fast importer for this url. Disable the fast flag");if(this.fast){if(d=b.pluck(a.table.cols,"label"),b.unique(d).length<d.length){var g="";throw b.inject(d,function(a,b){return a[b]=a[b]+1||1,a[b]>1&&(g=b),a},{}),new Error('You have more than one column named "'+g+'"')}b.each(a.table.rows,function(a){for(a=a.c,c=0;c<a.length;c++)e[c]=e[c]||[],""===a[c].v?e[c].push(null):e[c].push(a[c].v)}),b.each(d,function(a,b){f[a]=e[b]})}else{var h=/([A-Z]+)(\d+)/,i={};b.each(a.feed.entry,function(a){var b=h.exec(a.title.$t),c=b[1],f=parseInt(b[2],10);if(1===f){if(-1!==d.indexOf(a.content.$t))throw new Error('You have more than one column named "'+a.content.$t+'"');i[c]=e.length,d[i[c]]=a.content.$t,e[i[c]]=[]}else{var g=i[c];e[g][f-1]=a.content.$t}},this),b.each(e,function(a,c){a.length=b.max(b.pluck(e,"length")),a.splice(0,1);for(var g=0;g<a.length;g++)(b.isUndefined(a[g])||""===a[g])&&(a[g]=null);f[d[c]]=a})}return{columns:d,data:f}}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers.Delimited=function(a){a=a||{},this.delimiter=a.delimiter||",",this.skipRows=a.skipRows||0,this.emptyValue=a.emptyValue||null,this.__delimiterPatterns=new RegExp("(\\"+this.delimiter+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+this.delimiter+"\\r\\n]*))","gi")},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),b.extend(c.Parsers.Delimited.prototype,c.Parsers.prototype,{parse:function(a){var c=[],d={},e={},f=function(a){e[a]||(e[a]=0);var b=a+e[a];return e[a]+=1,b},g=function(a,e,g,h,i){function j(a){var e=a[1];if(e.length&&e!==g){if(o++,l-1>n)throw o--,new Error("Not enough items in row");m=!0,n=0}else m||l++,n++;var h=null;if(h=a[2]?a[2].replace(new RegExp('""',"g"),'"'):a[3],m){if(""===h&&(h=i),"undefined"==typeof d[c[n]])throw new Error("Too many items in row");d[c[n]].push(h)}else{var j=function(a){for(var b=f(a);-1!==c.indexOf(b);)b=f(a);return b};(b.isUndefined(h)||""===h)&&(h="X"),-1!==c.indexOf(h)&&(h=j(h)),c.push(h),d[h]=[]}}g=g||",";var k=null,l=0,m=!1,n=-1,o=0;try{if(e=e.replace(/\s+$/,"").replace(/^[\r|\n|\s]+[\r|\n]/,"\n"),h>0){for(var p=0,q=0,r=e.length;h>p&&r>q;)/\n|\r|\r\n/.test(e.charAt(q))&&p++,q++;e=e.slice(q,r)}for(new RegExp("^"+g).test(e)&&j(["","",void 0,""]);k=a.exec(e);)j(k)}catch(s){throw new Error("Error while parsing delimited data on row "+o+". Message: "+s.message)}return{columns:c,data:d}};return g(this.__delimiterPatterns,a,this.delimiter,this.skipRows,this.emptyValue)}})}(this,_),this.Handlebars={},function(a){a.VERSION="1.0.rc.1",a.helpers={},a.partials={},a.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},a.registerPartial=function(a,b){this.partials[a]=b},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new Error("Could not find property '"+a+"'")});var b=Object.prototype.toString,c="[object Function]";a.registerHelper("blockHelperMissing",function(d,e){var f=e.inverse||function(){},g=e.fn,h=b.call(d);return h===c&&(d=d.call(this)),d===!0?g(this):d===!1||null==d?f(this):"[object Array]"===h?d.length>0?a.helpers.each(d,e):f(this):g(d)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.registerHelper("each",function(b,c){var d,e=c.fn,f=c.inverse,g="";if(c.data&&(d=a.createFrame(c.data)),b&&b.length>0)for(var h=0,i=b.length;i>h;h++)d&&(d.index=h),g+=e(b[h],{data:d});else g=f(this);return g}),a.registerHelper("if",function(d,e){var f=b.call(d);return f===c&&(d=d.call(this)),!d||a.Utils.isEmpty(d)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){var d=c.fn,e=c.inverse;return c.fn=e,c.inverse=d,a.helpers["if"].call(this,b,c)}),a.registerHelper("with",function(a,b){return b.fn(a)}),a.registerHelper("log",function(b){a.log(b)})}(this.Handlebars);var handlebars=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,DATA:27,param:28,STRING:29,INTEGER:30,BOOLEAN:31,hashSegments:32,hashSegment:33,ID:34,EQUALS:35,pathSegments:36,SEP:37,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",27:"DATA",29:"STRING",30:"INTEGER",31:"BOOLEAN",34:"ID",35:"EQUALS",37:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[17,1],[25,2],[25,1],[28,1],[28,1],[28,1],[28,1],[28,1],[26,1],[32,2],[32,1],[33,3],[33,3],[33,3],[33,3],[33,3],[21,1],[36,3],[36,1]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return f[g-1];case 2:this.$=new d.ProgramNode(f[g-2],f[g]);break;case 3:this.$=new d.ProgramNode(f[g]);break;case 4:this.$=new d.ProgramNode([]);break;case 5:this.$=[f[g]];break;case 6:f[g-1].push(f[g]),this.$=f[g-1];break;case 7:this.$=new d.BlockNode(f[g-2],f[g-1].inverse,f[g-1],f[g]);break;case 8:this.$=new d.BlockNode(f[g-2],f[g-1],f[g-1].inverse,f[g]);break;case 9:this.$=f[g];break;case 10:this.$=f[g];break;case 11:this.$=new d.ContentNode(f[g]);break;case 12:this.$=new d.CommentNode(f[g]);break;case 13:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 14:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 15:this.$=f[g-1];break;case 16:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 17:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1],!0);break;case 18:this.$=new d.PartialNode(f[g-1]);break;case 19:this.$=new d.PartialNode(f[g-2],f[g-1]);break;case 20:break;case 21:this.$=[[f[g-2]].concat(f[g-1]),f[g]];break;case 22:this.$=[[f[g-1]].concat(f[g]),null];break;case 23:this.$=[[f[g-1]],f[g]];break;case 24:this.$=[[f[g]],null];break;case 25:this.$=[[new d.DataNode(f[g])],null];break;case 26:f[g-1].push(f[g]),this.$=f[g-1];break;case 27:this.$=[f[g]];break;case 28:this.$=f[g];break;case 29:this.$=new d.StringNode(f[g]);break;case 30:this.$=new d.IntegerNode(f[g]);break;case 31:this.$=new d.BooleanNode(f[g]);break;case 32:this.$=new d.DataNode(f[g]);break;case 33:this.$=new d.HashNode(f[g]);break;case 34:f[g-1].push(f[g]),this.$=f[g-1];break;case 35:this.$=[f[g]];break;case 36:this.$=[f[g-2],f[g]];break;case 37:this.$=[f[g-2],new d.StringNode(f[g])];break;case 38:this.$=[f[g-2],new d.IntegerNode(f[g])];break;case 39:this.$=[f[g-2],new d.BooleanNode(f[g])];break;case 40:this.$=[f[g-2],new d.DataNode(f[g])];break;case 41:this.$=new d.IdNode(f[g]);break;case 42:f[g-2].push(f[g]),this.$=f[g-2];break;case 43:this.$=[f[g]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,27:[1,24],34:[1,26],36:25},{17:27,21:23,27:[1,24],34:[1,26],36:25},{17:28,21:23,27:[1,24],34:[1,26],36:25},{17:29,21:23,27:[1,24],34:[1,26],36:25},{21:30,34:[1,26],36:25},{1:[2,1]},{6:31,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,32],21:23,27:[1,24],34:[1,26],36:25},{10:33,20:[1,34]},{10:35,20:[1,34]},{18:[1,36]},{18:[2,24],21:41,25:37,26:38,27:[1,45],28:39,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,25]},{18:[2,41],27:[2,41],29:[2,41],30:[2,41],31:[2,41],34:[2,41],37:[1,48]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],37:[2,43]},{18:[1,49]},{18:[1,50]},{18:[1,51]},{18:[1,52],21:53,34:[1,26],36:25},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:54,34:[1,26],36:25},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:41,26:55,27:[1,45],28:56,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,23]},{18:[2,27],27:[2,27],29:[2,27],30:[2,27],31:[2,27],34:[2,27]},{18:[2,33],33:57,34:[1,58]},{18:[2,28],27:[2,28],29:[2,28],30:[2,28],31:[2,28],34:[2,28]},{18:[2,29],27:[2,29],29:[2,29],30:[2,29],31:[2,29],34:[2,29]},{18:[2,30],27:[2,30],29:[2,30],30:[2,30],31:[2,30],34:[2,30]},{18:[2,31],27:[2,31],29:[2,31],30:[2,31],31:[2,31],34:[2,31]},{18:[2,32],27:[2,32],29:[2,32],30:[2,32],31:[2,32],34:[2,32]},{18:[2,35],34:[2,35]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],35:[1,59],37:[2,43]},{34:[1,60]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,61]},{18:[1,62]},{18:[2,21]},{18:[2,26],27:[2,26],29:[2,26],30:[2,26],31:[2,26],34:[2,26]},{18:[2,34],34:[2,34]},{35:[1,59]},{21:63,27:[1,67],29:[1,64],30:[1,65],31:[1,66],34:[1,26],36:25},{18:[2,42],27:[2,42],29:[2,42],30:[2,42],31:[2,42],34:[2,42],37:[2,42]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,36],34:[2,36]},{18:[2,37],34:[2,37]},{18:[2,38],34:[2,38]},{18:[2,39],34:[2,39]},{18:[2,40],34:[2,40]}],defaultActions:{16:[2,1],24:[2,25],38:[2,23],55:[2,21]},parseError:function(a){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){switch(c){case 0:if("\\"!==b.yytext.slice(-1)&&this.begin("mu"),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu")),b.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==b.yytext.slice(-1)&&this.popState(),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1)),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 35;case 13:return 34;case 14:return 34;case 15:return 37;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),29;case 20:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),29;case 21:return b.yytext=b.yytext.substr(1),27;case 22:return 31;case 23:return 31;case 24:return 30;case 25:return 34;case 26:return b.yytext=b.yytext.substr(1,b.yyleng-2),34;case 27:return"INVALID";case 28:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,28],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=handlebars,exports.Parser=handlebars.Parser,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function(a){if(!a[1])throw new Error("Usage: "+a[0]+" FILE");var b;return b="undefined"!=typeof process?require("fs").readFileSync(require("path").resolve(a[1]),"utf8"):require("file").path(require("file").cwd()).join(a[1]).read({charset:"utf-8"}),exports.parser.parse(b)},"undefined"!=typeof module&&require.main===module&&exports.main("undefined"!=typeof process?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(a){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(a)},Handlebars.print=function(a){return(new Handlebars.PrintVisitor).accept(a)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(){}},Handlebars.log=function(a,b){Handlebars.logger.log(a,b)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(a,b){this.type="program",this.statements=a,b&&(this.inverse=new Handlebars.AST.ProgramNode(b))},Handlebars.AST.MustacheNode=function(a,b,c){this.type="mustache",this.escaped=!c,this.hash=b;var d=this.id=a[0],e=this.params=a.slice(1),f=this.eligibleHelper=d.isSimple;this.isHelper=f&&(e.length||b)},Handlebars.AST.PartialNode=function(a,b){this.type="partial",this.id=a,this.context=b};var a=function(a,b){if(a.original!==b.original)throw new Handlebars.Exception(a.original+" doesn't match "+b.original)};Handlebars.AST.BlockNode=function(b,c,d,e){a(b.id,e),this.type="block",this.mustache=b,this.program=c,this.inverse=d,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(a){this.type="content",this.string=a},Handlebars.AST.HashNode=function(a){this.type="hash",this.pairs=a},Handlebars.AST.IdNode=function(a){this.type="ID",this.original=a.join(".");for(var b=[],c=0,d=0,e=a.length;e>d;d++){var f=a[d];".."===f?c++:"."===f||"this"===f?this.isScoped=!0:b.push(f)}this.parts=b,this.string=b.join("."),this.depth=c,this.isSimple=1===a.length&&!this.isScoped&&0===c},Handlebars.AST.DataNode=function(a){this.type="DATA",this.id=a},Handlebars.AST.StringNode=function(a){this.type="STRING",this.string=a},Handlebars.AST.IntegerNode=function(a){this.type="INTEGER",this.integer=a},Handlebars.AST.BooleanNode=function(a){this.type="BOOLEAN",this.bool=a},Handlebars.AST.CommentNode=function(a){this.type="comment",this.comment=a}}(),Handlebars.Exception=function(){var a=Error.prototype.constructor.apply(this,arguments);for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.message=a.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/[&<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():null==a||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return"undefined"==typeof a?!0:null===a?!0:a===!1?!0:"[object Array]"===Object.prototype.toString.call(a)&&0===a.length?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(a,b){a.prototype={compiler:a,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},guid:0,compile:function(a,b){this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var b,c=a.statements;this.opcodes=[];for(var d=0,e=c.length;e>d;d++)b=c[d],this[b.type](b);return this.isSimple=1===e,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=this.classifyMustache(b);"helper"===e?this.helperMustache(b,c,d):"simple"===e?(this.simpleMustache(b),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("pushLiteral","{}"),this.opcode("blockValue")):(this.ambiguousMustache(b,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("pushLiteral","{}"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("push","{}");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.accept(c),this.opcode("assignToHash",b[0])},partial:function(a){var b=a.id;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.original),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.options,c=this.classifyMustache(a);"simple"===c?this.simpleMustache(a):"helper"===c?this.helperMustache(a):this.ambiguousMustache(a),a.escaped&&!b.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(a,b,c){var d=a.id,e=d.parts[0];this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e)},simpleMustache:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+e);this.opcode("invokeHelper",d.length,e)}},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;d>c;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){this.options.data=!0,this.opcode("lookupData",a.id)},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){if(isNaN(a))throw new Error("EWOT");0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifyMustache:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.string)):this[b.type](b)},setupMustacheParams:function(a){var b=a.params;return this.pushParams(b),a.hash?this.hash(a.hash):this.opcode("pushLiteral","{}"),b},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("pushLiteral","{}"),d}};var c=function(a){this.value=a};b.prototype={nameLookup:function(a,c){return/^[0-9]+$/.test(c)?a+"["+c+"]":b.isValidJavaScriptVariableName(c)?a+"."+c:a+"['"+c+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":"buffer += "+a+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.compileChildren(a,b);var e,f=a.opcodes;for(this.i=0,g=f.length;this.i<g;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args);return this.createFunctionContext(d)},nextOpcode:function(){{var a=this.environment.opcodes;a[this.i+1]}return a[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = helpers || "+b+".helpers;";this.environment.usePartial&&(c=c+" partials = partials || "+b+".partials;"),this.options.data&&(c+=" data = data || {};"),a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild){for(var c in this.context.aliases)this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;f>e;e++)d.push("depth"+this.environment.depths.list[e]);if(a)return d.push(this.source.join("\n  ")),Function.apply(this,d);var g="function "+(this.name||"")+"("+d.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,g+"\n\n"),g},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),b+" = blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.source.push("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var a=this.nextOpcode(),b="";
this.context.aliases.escapeExpression="this.escapeExpression",a&&"appendContent"===a.opcode&&(b=" + "+this.quotedString(a.args[0]),this.eat(a)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+b))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.pushStack(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+"() : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(a){this.pushStack(this.nameLookup("data",a,"data"))},pushStringParam:function(a){this.pushStackLiteral("depth"+this.lastContext),this.pushString(a)},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){this.pushStack(a)},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b){this.context.aliases.helperMissing="helpers.helperMissing";var c=this.lastHelper=this.setupHelper(a,b);this.register("foundHelper",c.name),this.pushStack("foundHelper ? foundHelper.call("+c.callParams+") : helperMissing.call("+c.helperMissingParams+")")},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.pushStack(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var b=this.setupHelper(0,a),c=this.lastHelper=this.nameLookup("helpers",a,"helper");this.register("foundHelper",c);var d=this.nameLookup("depth"+this.lastContext,a,"context"),e=this.nextStack();this.source.push("if (foundHelper) { "+e+" = foundHelper.call("+b.callParams+"); }"),this.source.push("else { "+e+" = "+d+"; "+e+" = typeof "+e+" === functionType ? "+e+"() : "+e+"; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.pushStack("self.invokePartial("+b.join(", ")+");")},assignToHash:function(a){var b=this.popStack(),c=this.topStack();this.source.push(c+"['"+a+"'] = "+b+";")},compiler:b,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler,this.context.programs.push("");var h=this.context.programs.length;c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context)}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;g>f;f++)b=d[f],1===b?e.push("depth0"):e.push("depth"+(b-1));return 0===d.length?"self.program("+e.join(", ")+")":(e.shift(),"self.programWithDepth("+e.join(", ")+")")},register:function(a,b){this.useRegister(a),this.source.push(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.compileStack.push(new c(a)),a},pushStack:function(a){return this.source.push(this.incrStack()+" = "+a+";"),this.compileStack.push("stack"+this.stackSlot),"stack"+this.stackSlot},replaceStack:function(a){var b=a.call(this,this.topStack());return this.source.push(this.topStack()+" = "+b+";"),"stack"+this.stackSlot},nextStack:function(){var a=this.incrStack();return this.compileStack.push("stack"+this.stackSlot),a},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){var a=this.compileStack.pop();return a instanceof c?a.value:(this.stackSlot--,a)},topStack:function(){var a=this.compileStack[this.compileStack.length-1];return a instanceof c?a.value:a},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(a,b){var c=[];this.setupParams(a,c);var d=this.nameLookup("helpers",b,"helper");return{params:c,name:d,callParams:["depth0"].concat(c).join(", "),helperMissingParams:["depth0",this.quotedString(b)].concat(c).join(", ")}},setupParams:function(a,b){var c,d,e,f=[],g=[];f.push("hash:"+this.popStack()),d=this.popStack(),e=this.popStack(),(e||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),f.push("inverse:"+d),f.push("fn:"+e));for(var h=0;a>h;h++)c=this.popStack(),b.push(c),this.options.stringParams&&g.push(this.popStack());return this.options.stringParams&&f.push("contexts:["+g.join(",")+"]"),this.options.data&&f.push("data:data"),b.push("{"+f.join(",")+"}"),b.join(", ")}};for(var d="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),e=b.RESERVED_WORDS={},f=0,g=d.length;g>f;f++)e[d[f]]=!0;b.isValidJavaScriptVariableName=function(a){return!b.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(a,b){b=b||{};var c=Handlebars.parse(a),d=(new Handlebars.Compiler).compile(c,b);return(new Handlebars.JavaScriptCompiler).compile(d,b)},Handlebars.compile=function(a,b){function c(){var c=Handlebars.parse(a),d=(new Handlebars.Compiler).compile(c,b),e=(new Handlebars.JavaScriptCompiler).compile(d,b,void 0,!0);return Handlebars.template(e)}b=b||{};var d;return function(a,b){return d||(d=c()),d.call(this,a,b)}},Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:d=this.programs[a]=Handlebars.VM.program(b)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(d,e){return e=e||{},a.apply(this,[d,e.data||b].concat(c))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,f){var g={helpers:d,partials:e,data:f};if(void 0===a)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g);if(Handlebars.compile)return e[b]=Handlebars.compile(a,{data:void 0!==f}),e[b](c,g);throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template,function(a){a.fn.jOdometer=function(b){function c(a){void 0!=a?(clearInterval(u),h=a,d(h)):(d(h),h+=b.increment),0!=b.counterEnd&&h>=b.counterEnd&&(clearInterval(u),d(b.counterEnd))}function d(c){if(k=String(c).split("."),j.length>0)for(o=0;o<j.length;o++)oldDigit=j[o],k[1]&&(j[o]=k[1].charAt(o)),""==j[o]&&(j[o]="0"),e(a(".jodometer_decimal_"+o,f),parseInt(j[o]),parseInt(oldDigit));p=k[0],n=p.length-1;var d=0==b.maxDigits?i.length:b.maxDigits;for(o=0;d>o;o++)oldDigit=i[o],n>=0&&(i[o]=p.charAt(n)),""==i[o]&&0==b.maxDigits&&(i[o]="0"),""==oldDigit&&(b.prefixChar?(0==n&&(a(".jodometer_integer_"+o,f).animate({top:g},0,"linear"),oldDigit="0"),-1==n&&(a(".jodometer_integer_"+o,f).animate({top:15*b.heightNumber*-1},1,"linear"),a(".jodometer_integer_"+o,f).show())):0==n&&(a(".jodometer_integer_"+o,f).show(),oldDigit="0")),e(a(".jodometer_integer_"+o,f),parseInt(i[o]),parseInt(oldDigit)),n--}function e(a,c,d){return isNaN(c)||isNaN(d)?this:(c!=d&&(a.stop(),0==c?a.animate({top:10*b.heightNumber*-1+g},b.speed,b.easing).animate({top:g},1,"linear"):d>c?a.animate({top:10*b.heightNumber*-1+g},b.speed*((10-d)/10),"linear").animate({top:g},1,"linear").animate({top:c*b.heightNumber*-1+g},b.speed*d/10,b.easing):a.animate({top:c*b.heightNumber*-1+g},b.speed,b.easing)),void 0)}if(this.length>1)return this.each(function(){a(this).jOdometer(b)}),this;b=a.extend({},a.fn.jOdometer.defaults,b),this.goToNumber=function(a){c(a)};var f=a(this),g=-b.heightNumber,h=parseFloat(b.counterStart),i=[],j=[],k=String(b.counterStart).split("."),l=0,m=0;if(k[1]){for(var n=0,o=k[1].length-1;o>-1;o--)j[o]=k[1].charAt(o),a(this).append('<img style="position:absolute; right:'+(n*b.widthNumber+b.offsetRight+n*b.spaceNumbers)+"px; top:"+(parseInt(j[o])*b.heightNumber*-1+g)+'px;" class="jodometer_decimal_'+o+'" src="'+b.numbersImage+'" alt="Decimal '+(o+1)+'" />'),n++;a(this).append('<div style="position:absolute; width:'+b.widthDot+"px; height:"+b.heightNumber+"px; background:url("+b.numbersImage+") no-repeat center "+(12*b.heightNumber*-1+g)+"px; right:"+(k[1].length*b.widthNumber+b.offsetRight+k[1].length*b.spaceNumbers)+'px;" class="jodometer_dot"></div>'),l=k[1].length,m=b.widthDot}for(var p=k[0],n=p.length-1,q=0,r=0==b.maxDigits?p.length:b.maxDigits,o=0;r>o;o++){i[o]=o<p.length?p.charAt(n):"",b.formatNumber&&o>0&&o%3==0&&(a(this).append('<div style="position:absolute; width:'+b.widthDot+"px; height:"+b.heightNumber+"px; background:url("+b.numbersImage+") no-repeat center bottom; right:"+(o*b.widthNumber+l*b.widthNumber+m+q+b.offsetRight+l*b.spaceNumbers+o*b.spaceNumbers+b.spaceNumbers)+'px;" class="jodometer_dot"></div>'),q+=b.widthDot+b.spaceNumbers);var s="";0>n&&(s="display:none; ");var t=parseInt(i[o]);b.prefixChar&&-1==n&&(s="",t=14),a(this).append('<img style="'+s+"position:absolute; right:"+(o*b.widthNumber+l*b.widthNumber+m+q+b.offsetRight+l*b.spaceNumbers+o*b.spaceNumbers+b.spaceNumbers)+"px; top:"+(t*b.heightNumber*-1+g)+'px;" class="jodometer_integer_'+o+'" src="'+b.numbersImage+'" alt="Integer '+(o+1)+'" />'),n--}if(parseFloat(b.counterStart)!=b.counterEnd||"false"==b.counterEnd.toString()&&0==parseFloat(b.counterStart))var u=setInterval(function(){c()},b.delayTime);return this},a.fn.jOdometer.defaults={counterStart:"0000.00",counterEnd:!1,delayTime:1e3,increment:.01,speed:500,easing:"swing",numbersImage:"/images/jodometer-numbers.png",formatNumber:!1,heightNumber:31,widthNumber:14,offsetRight:0,spaceNumbers:0,widthDot:10,maxDigits:0,prefixChar:!1}}(jQuery),function(a,b,c,d){var e=c(a),f=c(b),g=c.fancybox=function(){g.open.apply(this,arguments)},h=null,i=b.createTouch!==d,j=function(a){return a&&a.hasOwnProperty&&a instanceof c},k=function(a){return a&&"string"===c.type(a)},l=function(a){return k(a)&&0<a.indexOf("%")},m=function(a,b){var c=parseInt(a,10);return b&&l(a)&&(c*=g.getViewport()[b]/100),Math.ceil(c)},n=function(a,b){return m(a,b)+"px"};c.extend(g,{version:"2.1.0",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!i,autoCenter:!i,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"'+(c.browser.msie?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{closeClick:!0,speedOut:200,showEarly:!0,css:{}},title:{type:"float"}},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){return a&&(c.isPlainObject(b)||(b={}),!1!==g.close(!0))?(c.isArray(a)||(a=j(a)?c(a).get():[a]),c.each(a,function(e,f){var h,i,l,m,n,o={};"object"===c.type(f)&&(f.nodeType&&(f=c(f)),j(f)?(o={href:f.attr("href"),title:f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,o,f.metadata())):o=f),h=b.href||o.href||(k(f)?f:null),i=b.title!==d?b.title:o.title||"",m=(l=b.content||o.content)?"html":b.type||o.type,!m&&o.isDom&&(m=f.data("fancybox-type"),m||(m=(m=f.prop("class").match(/fancybox\.(\w+)/))?m[1]:null)),k(h)&&(m||(g.isImage(h)?m="image":g.isSWF(h)?m="swf":"#"===h.charAt(0)?m="inline":k(f)&&(m="html",l=f)),"ajax"===m)&&(n=h.split(/\s+/,2),h=n.shift(),n=n.shift()),l||("inline"===m?h?l=c(k(h)?h.replace(/.*(?=#[^\s]+$)/,""):h):o.isDom&&(l=f):"html"===m?l=h:!m&&!h&&o.isDom&&(m="inline",l=f)),c.extend(o,{href:h,type:m,content:l,title:i,selector:n}),a[e]=o}),g.opts=c.extend(!0,{},g.defaults,b),b.keys!==d&&(g.opts.keys=b.keys?c.extend({},g.defaults.keys,b.keys):!1),g.group=a,g._start(g.opts.index)):void 0},cancel:function(){var a=g.coming;a&&!1!==g.trigger("onCancel")&&(g.hideLoading(),g.ajaxLoad&&g.ajaxLoad.abort(),g.ajaxLoad=null,g.imgPreload&&(g.imgPreload.onload=g.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0).trigger("onReset").remove(),g.current||g.trigger("afterClose"),g.coming=null)},close:function(a){g.cancel(),!1!==g.trigger("beforeClose")&&(g.unbindEvents(),g.isOpen&&!0!==a?(g.isOpen=g.isOpened=!1,g.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),g.wrap.stop(!0,!0).removeClass("fancybox-opened"),"fixed"===g.wrap.css("position")&&g.wrap.css(g._getPosition(!0)),g.transitions[g.current.closeMethod]()):(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),g._afterZoomOut()))},play:function(a){var b=function(){clearTimeout(g.player.timer)},d=function(){b(),g.current&&g.player.isActive&&(g.player.timer=setTimeout(g.next,g.current.playSpeed))},e=function(){b(),c("body").unbind(".player"),g.player.isActive=!1,g.trigger("onPlayEnd")};!0===a||!g.player.isActive&&!1!==a?g.current&&(g.current.loop||g.current.index<g.group.length-1)&&(g.player.isActive=!0,c("body").bind({"afterShow.player onUpdate.player":d,"onCancel.player beforeClose.player":e,"beforeLoad.player":b}),d(),g.trigger("onPlayStart")):e()},next:function(a){var b=g.current;b&&(k(a)||(a=b.direction.next),g.jumpto(b.index+1,a,"next"))},prev:function(a){var b=g.current;b&&(k(a)||(a=b.direction.prev),g.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=g.current;e&&(a=m(a),g.direction=b||e.direction[a>=e.index?"next":"prev"],g.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d)&&(g.cancel(),g._start(a))},reposition:function(a,b){var c;g.isOpen&&(c=g._getPosition(b),a&&"scroll"===a.type?(delete c.position,g.wrap.stop(!0,!0).animate(c,200)):g.wrap.css(c))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(h),h=null),g.isOpen&&!h&&((c||i)&&(g.wrap.removeAttr("style").addClass("fancybox-tmp"),g.trigger("onUpdate")),h=setTimeout(function(){var c=g.current;c&&(g.wrap.removeClass("fancybox-tmp"),"scroll"!==b&&g._setDimension(),"scroll"===b&&c.canShrink||g.reposition(a),g.trigger("onUpdate"),h=null)},i?500:c?20:300))},toggle:function(a){g.isOpen&&(g.current.fitToView="boolean"===c.type(a)?a:!g.current.fitToView,g.update())},hideLoading:function(){f.unbind("keypress.fb"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;g.hideLoading(),f.bind("keypress.fb",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),g.cancel())}),a=c('<div id="fancybox-loading"><div></div></div>').click(g.cancel).appendTo("body"),g.defaults.fixed||(b=g.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=g.current?g.current.locked:!1,c={x:e.scrollLeft(),y:e.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=i&&a.innerWidth?a.innerWidth:e.width(),c.h=i&&a.innerHeight?a.innerHeight:e.height()),c},unbindEvents:function(){g.wrap&&j(g.wrap)&&g.wrap.unbind(".fb"),f.unbind(".fb"),e.unbind(".fb")},bindEvents:function(){var a,b=g.current;b&&(e.bind("orientationchange.fb"+(i?"":" resize.fb")+(b.autoCenter&&!b.locked?" scroll.fb":""),g.update),(a=b.keys)&&f.bind("keydown.fb",function(e){var f=e.which||e.keyCode,h=e.target||e.srcElement;!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||h&&(h.type||c(h).is("[contenteditable]"))||!c.each(a,function(a,h){return 1<b.group.length&&h[f]!==d?(g[a](h[f]),e.preventDefault(),!1):-1<c.inArray(f,h)?(g[a](),e.preventDefault(),!1):void 0}))}),c.fn.mousewheel&&b.mouseWheel&&g.wrap.bind("mousewheel.fb",function(a,d,e,f){for(var h=c(a.target||null),i=!1;h.length&&!i&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)i=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=c(h).parent();0!==d&&!i&&1<g.group.length&&!b.canShrink&&(f>0||e>0?g.prev(f>0?"down":"left"):(0>f||0>e)&&g.next(0>f?"up":"right"),a.preventDefault())}))},trigger:function(a,b){var d,e=b||g.coming||g.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),!1===d)return!1;"onCancel"===a&&!g.isOpened&&(g.isActive=!1),e.helpers&&c.each(e.helpers,function(b,d){d&&g.helpers[b]&&c.isFunction(g.helpers[b][a])&&g.helpers[b][a](d,e)}),c.event.trigger(a+".fb")}},isImage:function(a){return k(a)&&a.match(/\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$/i)},isSWF:function(a){return k(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var b,d,e={},a=m(a);if(b=g.group[a]||null,!b)return!1;if(e=c.extend(!0,{},g.opts,b),b=e.margin,d=e.padding,"number"===c.type(b)&&(e.margin=[b,b,b,b]),"number"===c.type(d)&&(e.padding=[d,d,d,d]),e.modal&&c.extend(!0,e,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),e.autoSize&&(e.autoWidth=e.autoHeight=!0),"auto"===e.width&&(e.autoWidth=!0),"auto"===e.height&&(e.autoHeight=!0),e.group=g.group,e.index=a,g.coming=e,!1===g.trigger("beforeLoad"))g.coming=null;else{if(d=e.type,b=e.href,!d)return g.coming=null,g.current&&g.router&&"jumpto"!==g.router?(g.current.index=a,g[g.router](g.direction)):!1;if(g.isActive=!0,("image"===d||"swf"===d)&&(e.autoHeight=e.autoWidth=!1,e.scrolling="visible"),"image"===d&&(e.aspectRatio=!0),"iframe"===d&&i&&(e.scrolling="scroll"),e.wrap=c(e.tpl.wrap).addClass("fancybox-"+(i?"mobile":"desktop")+" fancybox-type-"+d+" fancybox-tmp "+e.wrapCSS).appendTo(e.parent),c.extend(e,{skin:c(".fancybox-skin",e.wrap),outer:c(".fancybox-outer",e.wrap),inner:c(".fancybox-inner",e.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,b){e.skin.css("padding"+b,n(e.padding[a]))}),g.trigger("onReady"),"inline"===d||"html"===d){if(!e.content||!e.content.length)return g._error("content")}else if(!b)return g._error("href");"image"===d?g._loadImage():"ajax"===d?g._loadAjax():"iframe"===d?g._loadIframe():g._afterLoad()}},_error:function(a){c.extend(g.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:g.coming.tpl.error}),g._afterLoad()},_loadImage:function(){var a=g.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,g.coming.width=this.width,g.coming.height=this.height,g._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,g._error("image")},a.src=g.coming.href,(a.complete===d||!a.complete)&&g.showLoading()},_loadAjax:function(){var a=g.coming;g.showLoading(),g.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){g.coming&&"abort"!==b?g._error("ajax",a):g.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,g._afterLoad())}}))},_loadIframe:function(){var a=g.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",i?"auto":a.iframe.scrolling).attr("src",a.href);c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(g.showLoading(),b.one("load",function(){c(this).data("ready",1),i||c(this).bind("load.fb",g.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),g._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||g._afterLoad()},_preloadImages:function(){var a,b,c=g.group,d=g.current,e=c.length,f=d.preload?Math.min(d.preload,e-1):0;for(b=1;f>=b;b+=1)a=c[(d.index+b)%e],"image"===a.type&&a.href&&((new Image).src=a.href)},_afterLoad:function(){var a,b,d,e,f,h=g.coming,i=g.current;if(g.hideLoading(),h&&!1!==g.isActive)if(!1===g.trigger("afterLoad",h,i))h.wrap.stop(!0).trigger("onReset").remove(),g.coming=null;else{switch(i&&(g.trigger("beforeChange",i),i.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove(),"fixed"===i.wrap.css("position")&&i.wrap.css(g._getPosition(!0))),g.unbindEvents(),a=h.content,b=h.type,d=h.scrolling,c.extend(g,{wrap:h.wrap,skin:h.skin,outer:h.outer,inner:h.inner,current:h,previous:i}),e=h.href,b){case"inline":case"ajax":case"html":h.selector?a=c("<div>").html(a).find(h.selector):j(a)&&(a.data("fancybox-placeholder")||a.data("fancybox-placeholder",c('<div class="fancybox-placeholder"></div>').insertAfter(a).hide()),a=a.show().detach(),h.wrap.bind("onReset",function(){c(this).find(a).length&&a.hide().replaceAll(a.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":a=h.tpl.image.replace("{href}",e);break;case"swf":a='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+e+'"></param>',f="",c.each(h.swf,function(b,c){a+='<param name="'+b+'" value="'+c+'"></param>',f+=" "+b+'="'+c+'"'}),a+='<embed src="'+e+'" type="application/x-shockwave-flash" width="100%" height="100%"'+f+"></embed></object>"}(!j(a)||!a.parent().is(h.inner))&&h.inner.append(a),g.trigger("beforeShow"),h.inner.css("overflow","yes"===d?"scroll":"no"===d?"hidden":d),g._setDimension(),h.wrap.removeClass("fancybox-tmp"),h.pos=c.extend({},h.dim,g._getPosition(!0)),g.isOpen=!1,g.coming=null,g.bindEvents(),g.isOpened?i.prevMethod&&g.transitions[i.prevMethod]():c(".fancybox-wrap").not(h.wrap).stop(!0).trigger("onReset").remove(),g.transitions[g.isOpened?h.nextMethod:h.openMethod](),g._preloadImages()}},_setDimension:function(){var a,b,d,e,f,h,i,j,k,o=g.getViewport(),p=0,q=!1,r=!1,q=g.wrap,s=g.skin,t=g.inner,u=g.current,r=u.width,v=u.height,w=u.minWidth,x=u.minHeight,y=u.maxWidth,z=u.maxHeight,A=u.scrolling,B=u.scrollOutside?u.scrollbarWidth:0,C=u.margin,D=C[1]+C[3],E=C[0]+C[2];if(q.add(s).add(t).width("auto").height("auto"),C=s.outerWidth(!0)-s.width(),a=s.outerHeight(!0)-s.height(),b=D+C,d=E+a,e=l(r)?(o.w-b)*m(r)/100:r,f=l(v)?(o.h-d)*m(v)/100:v,"iframe"===u.type){if(k=u.content,u.autoHeight&&1===k.data("ready"))try{k[0].contentWindow.document.location&&(t.width(e).height(9999),h=k.contents().find("body"),B&&h.css("overflow-x","hidden"),f=h.height())}catch(F){}}else(u.autoWidth||u.autoHeight)&&(t.addClass("fancybox-tmp"),u.autoWidth||t.width(e),u.autoHeight||t.height(f),u.autoWidth&&(e=t.width()),u.autoHeight&&(f=t.height()),t.removeClass("fancybox-tmp"));if(r=m(e),v=m(f),j=e/f,w=m(l(w)?m(w,"w")-b:w),y=m(l(y)?m(y,"w")-b:y),x=m(l(x)?m(x,"h")-d:x),z=m(l(z)?m(z,"h")-d:z),h=y,i=z,D=o.w-D,E=o.h-E,u.aspectRatio?(r>y&&(r=y,v=r/j),v>z&&(v=z,r=v*j),w>r&&(r=w,v=r/j),x>v&&(v=x,r=v*j)):(r=Math.max(w,Math.min(r,y)),v=Math.max(x,Math.min(v,z))),u.fitToView)if(y=Math.min(o.w-b,y),z=Math.min(o.h-d,z),t.width(m(r)).height(m(v)),q.width(m(r+C)),o=q.width(),b=q.height(),u.aspectRatio)for(;(o>D||b>E)&&r>w&&v>x&&!(19<p++);)v=Math.max(x,Math.min(z,v-10)),r=v*j,w>r&&(r=w,v=r/j),r>y&&(r=y,v=r/j),t.width(m(r)).height(m(v)),q.width(m(r+C)),o=q.width(),b=q.height();else r=Math.max(w,Math.min(r,r-(o-D))),v=Math.max(x,Math.min(v,v-(b-E)));B&&"auto"===A&&f>v&&D>r+C+B&&(r+=B),t.width(m(r)).height(m(v)),q.width(m(r+C)),o=q.width(),b=q.height(),q=(o>D||b>E)&&r>w&&v>x,r=u.aspectRatio?h>r&&i>v&&e>r&&f>v:(h>r||i>v)&&(e>r||f>v),c.extend(u,{dim:{width:n(o),height:n(b)},origWidth:e,origHeight:f,canShrink:q,canExpand:r,wPadding:C,hPadding:a,wrapSpace:b-s.outerHeight(!0),skinSpace:s.height()-v}),!k&&u.autoHeight&&v>x&&z>v&&!r&&t.height("auto")},_getPosition:function(a){var b=g.current,c=g.getViewport(),d=b.margin,e=g.wrap.width()+d[1]+d[3],f=g.wrap.height()+d[0]+d[2],d={position:"absolute",top:d[0],left:d[3]};return b.autoCenter&&b.fixed&&!a&&f<=c.h&&e<=c.w?d.position="fixed":b.locked||(d.top+=c.y,d.left+=c.x),d.top=n(Math.max(d.top,d.top+(c.h-f)*b.topRatio)),d.left=n(Math.max(d.left,d.left+(c.w-e)*b.leftRatio)),d},_afterZoomIn:function(){var a=g.current;a&&(g.isOpen=g.isOpened=!0,g.wrap.addClass("fancybox-opened").css("overflow","visible"),g.reposition(),(a.closeClick||a.nextClick)&&g.inner.css("cursor","pointer").bind("click.fb",function(b){c(b.target).is("a")||c(b.target).parent().is("a")||g[a.closeClick?"close":"next"]()}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(g.skin).bind("click.fb",g.close),a.arrows&&1<g.group.length&&((a.loop||0<a.index)&&c(a.tpl.prev).appendTo(g.outer).bind("click.fb",g.prev),(a.loop||a.index<g.group.length-1)&&c(a.tpl.next).appendTo(g.outer).bind("click.fb",g.next)),g.trigger("afterShow"),a.loop||a.index!==a.group.length-1?g.opts.autoPlay&&!g.player.isActive&&(g.opts.autoPlay=!1,g.play()):g.play(!1))},_afterZoomOut:function(){var a=g.current;c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),c.extend(g,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),g.trigger("afterClose",a)}}),g.transitions={getOrigPosition:function(){var a=g.current,b=a.element,c=a.orig,d={},e=50,f=50,h=a.hPadding,i=a.wPadding,k=g.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),j(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=k.y+(k.h-f)*a.topRatio,d.left=k.x+(k.w-e)*a.leftRatio),a.locked&&(d.top-=k.y,d.left-=k.x),d={top:n(d.top-h*a.topRatio),left:n(d.left-i*a.leftRatio),width:n(e+i),height:n(f+h)}},step:function(a,b){var c,d,e=b.prop;d=g.current;var f=d.wrapSpace,h=d.skinSpace;("width"===e||"height"===e)&&(c=b.end===b.start?1:(a-b.start)/(b.end-b.start),g.isClosing&&(c=1-c),d="width"===e?d.wPadding:d.hPadding,d=a-d,g.skin[e](m("width"===e?d:d-f*c)),g.inner[e](m("width"===e?d:d-f*c-h*c)))},zoomIn:function(){var a=g.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),g.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:g._afterZoomIn})},zoomOut:function(){var a=g.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),g.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:g._afterZoomOut})},changeIn:function(){var a,b=g.current,c=b.nextEffect,d=b.pos,e={opacity:1},f=g.direction;d.opacity=.1,"elastic"===c&&(a="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(d[a]=n(m(d[a])-200),e[a]="+=200px"):(d[a]=n(m(d[a])+200),e[a]="-=200px")),"none"===c?g._afterZoomIn():g.wrap.css(d).animate(e,{duration:b.nextSpeed,easing:b.nextEasing,complete:g._afterZoomIn})},changeOut:function(){var a=g.previous,b=a.prevEffect,d={opacity:.1},e=g.direction;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"=200px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},g.helpers.overlay={overlay:null,update:function(){var a,d="100%";this.overlay.width(d).height("100%"),c.browser.msie?(a=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),f.width()>a&&(d=f.width())):f.width()>e.width()&&(d=f.width()),this.overlay.width(d).height(f.height())},onReady:function(a,d){c(".fancybox-overlay").stop(!0,!0),this.overlay||c.extend(this,{overlay:c('<div class="fancybox-overlay"></div>').appendTo(d.parent),margin:f.height()>e.height()||"scroll"===c("body").css("overflow-y")?c("body").css("margin-right"):!1,el:b.all&&!b.querySelector?c("html"):c("body")}),d.fixed&&!i&&(this.overlay.addClass("fancybox-overlay-fixed"),d.autoCenter&&(this.overlay.append(d.wrap),d.locked=this.overlay)),!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var d=this.overlay.unbind(".fb").width("auto").height("auto").css(a.css);a.closeClick&&d.bind("click.fb",function(a){c(a.target).hasClass("fancybox-overlay")&&g.close()}),b.fixed&&!i?b.locked&&(this.el.addClass("fancybox-lock"),!1!==this.margin&&c("body").css("margin-right",m(this.margin)+b.scrollbarWidth)):this.update(),d.show()},onUpdate:function(a,b){(!b.fixed||i)&&this.update()},afterClose:function(a){var b=this,a=a.speedOut||0;b.overlay&&!g.isActive&&b.overlay.fadeOut(a||0,function(){c("body").css("margin-right",b.margin),b.el.removeClass("fancybox-lock"),b.overlay.remove(),b.overlay=null})}},g.helpers.title={beforeShow:function(a){var b=g.current.title,d=a.type;if(k(b)&&""!==c.trim(b)){switch(b=c('<div class="fancybox-title fancybox-title-'+d+'-wrap">'+b+"</div>"),d){case"inside":d=g.skin;break;case"outside":d=g.wrap;break;case"over":d=g.inner;break;default:d=g.skin,b.appendTo("body").width(b.width()).wrapInner('<span class="child"></span>'),g.current.margin[2]+=Math.abs(m(b.css("margin-bottom")))}"top"===a.position?b.prependTo(d):b.appendTo(d)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",h=function(f){var h,i,j=c(this).blur(),k=b;!(f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||j.is(".fancybox-wrap")||(h=a.groupAttr||"data-fancybox-group",i=j.attr(h),i||(h="rel",i=j.get(0)[h]),i&&""!==i&&"nofollow"!==i&&(j=e.length?c(e):d,j=j.filter("["+h+'="'+i+'"]'),k=j.index(this)),a.index=k,!1===g.open(j,a)||!f.preventDefault()))},a=a||{};return b=a.index||0,e&&!1!==a.live?f.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",h):d.unbind("click.fb-start").bind("click.fb-start",h),this},f.ready(function(){if(c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();return a.remove(),b}),c.support.fixedPosition===d){var a=c.support,b=c('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===b[0].offsetTop||15===b[0].offsetTop;b.remove(),a.fixedPosition=e}c.extend(g.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")})
})}(window,document,jQuery),function(a){"use strict";var b=a.fancybox,c=function(b,c,d){return d=d||"","object"===a.type(d)&&(d=a.param(d,!0)),a.each(c,function(a,c){b=b.replace("$"+a,c||"")}),d.length&&(b+=(b.indexOf("?")>0?"&":"?")+d),b};b.helpers.media={types:{youtube:{matcher:/(youtube\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed)?([\w-]{11}|\?listType=(.*)&list=(.*)).*/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"opaque",enablejsapi:1},type:"iframe",url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,color:"",fullscreen:1},type:"iframe",url:"//player.vimeo.com/video/$1"},metacafe:{matcher:/metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,params:{autoPlay:"yes"},type:"swf",url:function(b,c,d){return d.swf.flashVars="playerVars="+a.param(c,!0),"//www.metacafe.com/fplayer/"+b[1]+"/.swf"}},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"swf",url:"//www.dailymotion.com/swf/video/$1"},twitvid:{matcher:/twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,params:{autoplay:0},type:"iframe",url:"//www.twitvid.com/embed.php?guid=$1"},twitpic:{matcher:/twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,type:"image",url:"//twitpic.com/show/full/$1/"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/"},google_maps:{matcher:/maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,type:"iframe",url:function(a){return"//maps.google."+a[1]+"/"+a[3]+a[4]+"&output="+(a[4].indexOf("layer=c")>0?"svembed":"embed")}}},beforeLoad:function(b,d){var e,f,g,h,i=d.href||"",j=!1;for(e in this.types)if(f=this.types[e],g=i.match(f.matcher)){j=f.type,h=a.extend(!0,{},f.params,d[e]||(a.isPlainObject(b[e])?b[e].params:null)),i="function"===a.type(f.url)?f.url.call(this,g,h,d):c(f.url,g,h);break}j&&(d.href=i,d.type=j,d.autoHeight=!1)}}}(jQuery),!function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(b).is("body")?a(window):a(b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&d.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),function(a,b,c){function d(a){return a}function e(a){return decodeURIComponent(a.replace(f," "))}var f=/\+/g,g=a.cookie=function(f,h,i){if(h!==c){if(i=a.extend({},g.defaults,i),null===h&&(i.expires=-1),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return h=g.json?JSON.stringify(h):String(h),b.cookie=[encodeURIComponent(f),"=",g.raw?h:encodeURIComponent(h),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=g.raw?d:e,m=b.cookie.split("; "),n=0,o=m.length;o>n;n++){var p=m[n].split("=");if(l(p.shift())===f){var q=l(p.join("="));return g.json?JSON.parse(q):q}}return null};g.defaults={},a.removeCookie=function(b,c){return null!==a.cookie(b)?(a.cookie(b,null,c),!0):!1}}(jQuery,document),function(a,b){"$:nomunge";var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this);var RJ=RJ||{SPREADSHEETKEY:"0Ao7re1ITFPKydFhKcGFDT2JpTnphbnNubTUwbThVSEE",setupDataCaching:function(){RJ.fetchDataFromGDocs()&&(dataCache={}),RJ.pendingGDocsRequests=0},fetchDataFromGDocs:function(a){return!0},showDataFromGDocs:function(){return},loadData:function(a,b,c){var d=[],e={},f=new Miso.Dataset({importer:Miso.Importers.GoogleSpreadsheet,parser:Miso.Parsers.GoogleSpreadsheet,key:RJ.SPREADSHEETKEY,worksheet:b});RJ.fetchDataFromGDocs(a)?(RJ.pendingGDocsRequests++,f.fetch({success:function(){this.each(function(a){d.push(a)}),e[a]=d,dataCache[a]=d,RJ.pendingGDocsRequests--,RJ.fetchDataFromGDocs()&&0==RJ.pendingGDocsRequests&&RJ.showDataFromGDocs(),RJ.templatize(a,e,c)},error:function(){d=dataCache[a],e[a]=d,RJ.templatize(a,e,c)}})):(d=dataCache[a],e[a]=d,RJ.templatize(a,e,c))},templatize:function(a,b,c){if("videos"===a&&_.each(b.videos,function(a,c){var d=b.videos[c].video_url.split("v=")[1],e=d.indexOf("&");-1!==e&&(d=d.substring(0,e)),b.videos[c].thumbnail="https://i3.ytimg.com/vi/"+d+"/0.jpg"}),"counters"===a){var d=RJ.normalizeCounterValue(b.counters[0].amount),e=RJ.normalizeCounterValue(b.counters[1].amount);return RJ.counter.options.counterStart=d-3,RJ.counter.options.counterEnd=d,RJ.counter.options.counterStart==RJ.counter.options.counterEnd&&(RJ.counter.options.counterStart-=10),$(".counter").jOdometer(RJ.counter.options),$(".donations").html(RJ.commify(e)),void 0}if(void 0!==c&&(b=RJ.transform(b[a],c)),$("#"+a+"-template").length>0){var f=$("#"+a+"-template").html(),g=Handlebars.compile(f);$("#"+a+"-container").append(g(b))}},transform:function(a,b){var c=[],d=[];return _.each(a,function(a,e){e>0&&e%b===0&&(c.push(d),d=[]),d.push(a)}),d.length>0&&c.push(d),c},commify:function(a){return"$"+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},normalizeCounterValue:function(a){return a=a.toString().replace(/\.(\d+)/),a=a.replace(/\D/,""),parseInt(a)},counter:{options:{increment:1,delayTime:500,counterStart:0,counterEnd:0,numbersImage:"http://rollingjubilee.org/assets/img/jodometer-numbers-24pt.png",widthNumber:32,heightNumber:54,spaceNumbers:0,offsetRight:-10,maxDigits:10,prefixChar:!0}},twitter:{tweet:"You are not a loan. #RollingJubilee #PeoplesBailout @StrikeDebt",getURL:function(a,b){var c="https://twitter.com/home?",b=void 0!==b?b:RJ.twitter.tweet;return void 0!==a?c+"status=."+encodeURIComponent(a+" "+b):c+"status="+encodeURIComponent(b)}},ecard:{chosen_graphic:"one",recipient_name:"Friend",first_name:"Your Friend",donation_amount:0,get:function(a){a&&$.each($.parseJSON(a),function(a,b){$("#"+a).length>0&&($("#"+a).val(b),RJ.ecard[a]=b),"chosen_graphic"===a&&($(".ecard #options div").removeClass("selected"),$("#"+b).addClass("selected"),RJ.ecard.chosen_graphic=b)})},getPreview:function(){var a=RJ.ecard.chosen_graphic?RJ.ecard.chosen_graphic:"one",b=RJ.ecard.donation_amount?RJ.ecard.donation_amount:"0",c=RJ.ecard.recipient_name?RJ.ecard.recipient_name:"Friend",d=RJ.ecard.first_name?RJ.ecard.first_name:"Your friend";return"http://tmwrk.com/rj/gifts/generate.php?image_number="+a+"&recipient_name="+c+"&first_name="+d+"&amount="+b},checkURLParams:function(){var a=RJ.ecard.getParameterByName("image_number"),b=RJ.ecard.getParameterByName("donation_amount"),c=RJ.ecard.getParameterByName("recipient_name"),d=RJ.ecard.getParameterByName("first_name");a&&b&&c&&d&&(RJ.ecard.chosen_graphic=a,RJ.ecard.donation_amount=b,RJ.ecard.recipient_name=c,RJ.ecard.first_name=d,RJ.ecard.updatePrintableContent(),$("body").addClass("permalinked"))},getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search);return null==d?null:decodeURIComponent(d[1].replace(/\+/g," "))},checkFields:function(){$(".ecard .right input").each(function(){RJ.ecard[$(this).attr("id")]=$(this).val(),"donation_amount"===$(this).attr("id")&&$(this).val().length<1&&(RJ.ecard[$(this).attr("id")]=0)}),$(".multiplier").html(20*parseInt(RJ.ecard.donation_amount));var a=0;$(".ecard .right input").each(function(){$(this).val().length>0&&a++}),a>2?($(".submit-ecard").removeClass("disabled"),$("#more-options").removeClass("disabled"),RJ.ecard.updatePrintableContent()):($(".submit-ecard").addClass("disabled"),$("#more-options").addClass("disabled"))},updatePrintableContent:function(){var a=RJ.ecard.getPreview();$("#print-content").html('<img src="'+a+'">')},emailLink:function(){}}};$(function(){RJ.setupDataCaching(),RJ.loadData("videos","1",4),RJ.loadData("allies","2"),RJ.loadData("knowledge","3"),RJ.loadData("social-media","4"),RJ.loadData("faq1","5"),RJ.loadData("faq2","6"),RJ.loadData("counters","7"),RJ.loadData("press","8"),$(".fancybox-media").fancybox({openEffect:"none",closeEffect:"none",helpers:{media:{}}}),$(document).on("click","nav.main a, a.scroll",function(){var a=$(this).attr("href"),b=$(a).offset().top-20;return $("html,body").animate({scrollTop:b},700),!1}),$(document).on("click",".journalists li",function(){$(this).addClass("selected").siblings().removeClass("selected"),RJ.twitter.target=$(this).find(".username").text(),$(".statuses").slideDown();var a=$(".statuses").offset().top;return $("html,body").animate({scrollTop:a},300),!1}),$(document).on("click",".statuses li",function(){return $(this).addClass("selected").siblings().removeClass("selected"),RJ.twitter.tweet=$(this).find("span").text()+" http://rollingjubilee.org",location.href=RJ.twitter.getURL(RJ.twitter.target,RJ.twitter.tweet),!1}),$(document).on("click",".ecard #options div",function(a){RJ.ecard.chosen_graphic=$(this).attr("id"),$(".ecard #options div").removeClass("selected"),$(this).addClass("selected"),$("#preview").find("img").attr("src",$(this).find("img").attr("src").replace("_thumb","_left")),a.preventDefault()}),$(".ecard .right input").on("keyup",$.debounce(250,function(){RJ.ecard.checkFields()})),RJ.ecard.checkURLParams(),RJ.ecard.checkFields(),$(".submit-ecard:not(.disabled)").live("click",function(){RJ.ecard.donation_amount=$("#donation_amount").val(),location.href=RJ.ecard.getPreview()}),$("#print-this-page").live("click",function(){return window.print(),!1}),$("#email-link").live("click",function(){var a=encodeURIComponent(RJ.ecard.chosen_graphic),b=encodeURIComponent(RJ.ecard.donation_amount),c=encodeURIComponent(RJ.ecard.recipient_name),d=encodeURIComponent(RJ.ecard.first_name),e="http://rollingjubilee.org/gifts/?image_number="+a+"&recipient_name="+c+"&first_name="+d+"&donation_amount="+b,f="http://api.bitly.com/v3/shorten?login=dphiffer&apiKey=R_67523ca32f7b9c2cd1acedd601a662a0&longUrl="+encodeURIComponent(e)+"&format=json";return $.ajax({url:f,dataType:"json",success:function(a){var b="Happy Holidays!",c="Dear "+RJ.ecard.recipient_name+",\n\nI'm sending you the gift of debt liberation! Just follow this link:\n"+a.data.url+"\n\nHappy Holidays!\n"+RJ.ecard.first_name;window.location="mailto:?to=&subject="+encodeURIComponent(b)+"&body="+encodeURIComponent(c)}}),!1}),$(document).on("click","#sample-tweets li",function(){location.href=RJ.twitter.getURL(void 0,$(this).find("span").text())})});